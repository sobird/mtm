"use strict";(window.webpackJsonp_mtm_market=window.webpackJsonp_mtm_market||[]).push([[223],{3343:(Z,M,e)=>{e.d(M,{Z:()=>t});var u=e(5893),_=e(599),g=e.n(_),r=e(4184),T=e.n(r),s=e(4047),I=e.n(s),P=e(7484),U=e.n(P);const{RangePicker:j}=s.DatePicker,t=({text:d,mode:c,fieldProps:F,render:f,renderFormItem:A})=>{const{value:v=[],onChange:C,defaultValue:x}=F,O=[...v],[V,R]=O;R&&(O[1]=R?.map(a=>U()(a)));const[N,J]=(0,_.useState)(v[1]?2:1),[L,n]=(0,_.useState)(O);if(c==="read"){const a=(0,u.jsx)("span",{children:R?O[1].map(o=>o.format("YYYY-MM-DD")).join(" \u5230 "):`\u9886\u53D6\u540E ${V||"-"} \u5929`});return f?f(d,{mode:c,...F},a):a}if(c==="edit"||c==="update"){const a=E=>{J(E.target.value),o(E.target.value,L)},o=(E,B)=>{const i=[...B||[]],[,p]=i;p&&(i[1]=p?.map(S=>S.format("YYYY-MM-DD"))),E===1?i[1]=void 0:i[0]=void 0,C?.(i)},D=(E,B)=>{const i=[...L||[]];i[E]=B===null?void 0:B,n(i),o(N,i)},{className:l}=F,m=(0,u.jsxs)(s.Radio.Group,{className:T()("input-use-term",l),value:N,onChange:a,children:[(0,u.jsxs)(s.Radio,{value:1,children:[(0,u.jsx)("span",{children:"\u9886\u53D6\u540E"}),(0,u.jsx)(s.InputNumber,{style:{flex:1},addonAfter:"\u5929",min:1,max:30,value:L?.[0],defaultValue:x?.[0],onChange:E=>D(0,E)})]}),(0,u.jsxs)(s.Radio,{value:2,children:[(0,u.jsx)("span",{children:"\u81EA\u5B9A\u4E49"}),(0,u.jsx)(j,{style:{flex:1},value:L?.[1],defaultValue:x?.[1],onChange:E=>D(1,E)})]})]});return A?A(d,{mode:c,...F},m):m}}},1849:(Z,M,e)=>{e.d(M,{Z:()=>W});var u=e(5893),_=e(2975),g=e.n(_),r=e(4047),T=e.n(r),s=e(2979),I=e.n(s);const P=(0,_.createHashRouter)([{}]);function U(t,d,c,F){var f;let A=t.path;const v=c.indexOf(t)===c.length-1;return v?(0,u.jsx)("span",{children:t.title}):t.href?(0,u.jsx)("a",{href:P.createHref({pathname:t.href}),onClick:C=>{C.preventDefault(),P.navigate(t.href)},children:t.title}):(((f=t.path)==null?void 0:f.indexOf("/"))!==0&&(A="/"+F.filter(C=>C).join("/")),console.log("paths",JSON.stringify(F),A),v?(0,u.jsx)("span",{children:t.title}):(0,u.jsx)(_.Link,{to:A,relative:"route",children:t.title}))}const W=({children:t,breadcrumb:d,title:c,icon:F,description:f,extra:A,...v})=>(0,u.jsxs)("div",{className:"micro-page-container",...v,children:[(0,u.jsxs)("div",{className:"micro-page-header",children:[(0,u.jsx)(r.Breadcrumb,{className:"micro-breadcrumb",separator:(0,u.jsx)(s.RightOutlined,{}),itemRender:U,...d}),(0,u.jsxs)(r.Row,{className:"micro-page-header-heading",align:"middle",children:[(0,u.jsx)(r.Col,{flex:1,children:(0,u.jsxs)("h2",{children:[typeof F=="string"?(0,u.jsx)("i",{className:`iconfont icon-${F}`}):F,c]})}),(0,u.jsx)(r.Col,{children:(0,u.jsx)(r.Space,{children:A})})]}),f&&(0,u.jsx)("div",{className:"micro-page-header-description",children:f})]}),(0,u.jsx)(r.Card,{bodyStyle:{padding:16},className:"micor-page-content",children:t})]})},6785:(Z,M,e)=>{e.d(M,{Z:()=>L});var u=e(5893),_=e(2975),g=e(4047),r=e(9018),T=e(502);const s=(n,a)=>({fieldProps:D,proFieldProps:l,...m})=>(0,u.jsx)(T.Z,{valueType:a,render:(E,B,i)=>{const{mode:p}=B;return(0,u.jsx)(n,{text:E,mode:p,fieldProps:B})},renderFormItem:(E,B,i)=>{const{mode:p}=B;return(0,u.jsx)(n,{text:E,mode:p,fieldProps:B})},fieldProps:D,proFieldProps:l,...m});var I=e(599),P=e.n(I),U=e(4184),j=e.n(U),W=e(869),t=e(2077),d=e.n(t);const c={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"\u5343",million:"\u767E\u4E07",billion:"\u5341\u4EBF",trillion:"\u5146"},ordinal(){return"."},currency:{symbol:"\xA5"}};d().register("locale","zh",c),d().locale("zh"),d().nullFormat(""),d().fn.round=function(n=2){return Math.round(Math.pow(10,n)*this.value())/Math.pow(10,n)},d().fn.isFloat=function(){const n=this.value();return parseInt(n,10)<parseFloat(n)},d().register("format","custom formats",{regexps:{format:/(&)/,unformat:/(&)/},format(n,a,o){const D=d()._.includes(a," %")?" ":"";let l;return n*=100,a=a.replace(/\s?%/,""),l=d()._.numberToFormat(n,a,o),d()._.includes(l,")")?(l=l.split(""),l.splice(-1,0,`${D}%`),l=l.join("")):l=`${l}${D}%`,l},unformat(n){return d()._.stringToNumber(n)*.01}});const F=null,f=({text:n,mode:a,render:o,placeholder:D,renderFormItem:l,fieldProps:m},E)=>{const{value:B,defaultValue:i,onChange:p,id:S,validator:G=[]}=m,[H,uu]=(0,I.useState)([]),[y,Y]=(0,W.Z)(()=>i,{value:B,onChange:p});if(a==="read"){const $=(0,u.jsxs)("span",{ref:E,children:["\u6EE1 ",n[0]||"-","\u5143 \u51CF ",n[1]||"-","\u5143"]});return o?o(n,{mode:a,...m},$):$}if(a==="edit"||a==="update"){const $=()=>{if(Array.isArray(y)){const[h,K]=y;typeof h=="number"&&typeof K=="number"&&h>K?Y([K,h]):h===void 0&&K===void 0&&Y(void 0)}},Q=(h,K)=>{var q;const z=[...y||[]];z[h]=K===null?void 0:K,Y(z),H[h]={...(q=G[h])==null?void 0:q.call(G,z)},uu(H)},X=m?.placeholder||D||["\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB","\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"],b=h=>Array.isArray(X)?X[h]:X,{className:eu,...w}=m,k=(0,u.jsxs)("div",{className:j()("input-amount-rule",eu),children:[(0,u.jsx)(g.InputNumber,{style:{width:"100%"},addonBefore:"\u6EE1",addonAfter:c.currency.symbol,min:0,max:5e3,...w,placeholder:b(0),id:`${S}-0`,value:y?.[0],defaultValue:i?.[0],onChange:h=>Q(0,h)}),(0,u.jsx)(g.InputNumber,{style:{width:"100%"},addonBefore:"\u51CF",addonAfter:c.currency.symbol,min:0,max:5e3,...w,placeholder:b(1),id:`${S}-1`,value:y?.[1],defaultValue:i?.[1],onChange:h=>Q(1,h)})]});return l?l(n,{mode:a,...m},k):k}return null},A=async(n,a)=>{const[o,D]=a;if(!o&&o!==0)throw new Error("\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB");if(!D&&D!==0)throw new Error("\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D")},v=[n=>{const[a,o]=n;if(!a&&a!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB"}},n=>{const[a,o]=n;if(!o&&o!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"};if(o<.01)return{status:"error",help:"\u9762\u989D\u6700\u5C0F\u503C\u662F0.01\u5143"};if(a===0){if(o>500)return{status:"error",help:"\u95E8\u69DB\u4E3A0\u65F6\uFF0C\u9762\u989D\u9700\u5C0F\u4E8E\u7B49\u4E8E500\u5143"};o>10}}],C=P().forwardRef(f),x=s(C,"AmountRule");var O=e(3343);const V=s(O.Z,"UseTerm");var R=e(2655);const N={labelCol:{flex:"0 0 110px"}},L=({children:n,mode:a,...o})=>{const[,D]=(0,_.useSearchParams)();return(0,u.jsxs)(r.ProForm,{colon:!1,layout:"horizontal",...N,submitter:{render:(l,m)=>(0,u.jsx)(g.Space,{style:{marginLeft:110},children:m})},...o,children:[(0,u.jsx)(r.ProFormSelect,{name:"target",label:"\u4F18\u60E0\u5238\u7C7B\u578B",valueEnum:R.Qi,placeholder:"\u8BF7\u9009\u62E9",width:"lg",allowClear:!1,disabled:a&&a==="update",onChange:l=>{D(m=>(m.set("target",l),m),{replace:!0})}}),(0,u.jsx)(r.ProFormText,{width:"lg",name:"name",label:"\u4F18\u60E0\u5238\u540D\u79F0",placeholder:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0"},{max:10,message:"\u4F18\u60E0\u5238\u540D\u79F0\u6700\u591A\u586B\u519910\u4E2A\u5B57"}]}),(0,u.jsx)(r.ProFormText,{name:"displayName",label:"\u4F18\u60E0\u5238\u6587\u6848",disabled:!0,width:"lg"}),(0,u.jsx)(r.ProFormDateTimeRangePicker,{required:!0,width:"lg",name:"putTerm",label:"\u53D1\u653E\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u653E\u65F6\u95F4"}]}),(0,u.jsx)(r.ProFormDigit,{label:"\u53D1\u653E\u5F20\u6570",name:"stock",placeholder:"\u8BF7\u8F93\u51651-1,000,000\u7684\u6B63\u6574\u6570",width:"lg",min:1,max:1e6,rules:[{required:!0,message:"\u8BF7\u586B\u5199\u53D1\u653E\u5F20\u6570"}]}),(0,u.jsx)(x,{fieldProps:{validator:v},placeholder:["\u8BF7\u8F93\u5165\u95E8\u69DB","\u8BF7\u8F93\u5165\u9762\u989D"],name:"rule",label:"\u95E8\u69DB\u53CA\u9762\u989D",width:"lg",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u95E8\u69DB\u53CA\u9762\u989D"}]}),(0,u.jsx)(r.ProFormSelect,{name:"limit",label:"\u6BCF\u4EBA\u9650\u9886\u5F20\u6570",valueEnum:R.U8,placeholder:"\u8BF7\u9009\u62E9",width:"lg",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6BCF\u4EBA\u9650\u9886\u5F20\u6570"}]}),(0,u.jsx)(V,{name:"useTerm",label:"\u4F7F\u7528\u65F6\u95F4",width:"lg",required:!0}),n]})}},223:(Z,M,e)=>{e.r(M),e.d(M,{default:()=>A});var u=e(5893),_=e(599),g=e.n(_),r=e(2975),T=e.n(r),s=e(4047),I=e.n(s),P=e(9018),U=e.n(P),j=e(2979),W=e.n(j),t=e(2655),d=e(1849),c=e(6785);const F=[{title:"\u9996\u9875",href:"/"},{title:"\u8425\u9500\u4E2D\u5FC3",path:"/"},{title:"\u4F18\u60E0\u5238",path:"coupons"},{title:"\u4F18\u60E0\u5238\u8BE6\u60C5",path:"detail"}],A=()=>{const v=(0,r.useNavigate)(),C=(0,r.useParams)(),[x]=s.Form.useForm(),[O,V]=(0,_.useState)();(0,_.useEffect)(()=>{t.ZP.detail(C.id).then(N=>{V(N),x.resetFields()})},[]);const R=(0,t.mi)(O?.status)?(0,u.jsx)(s.Button,{type:"primary",icon:(0,u.jsx)(j.EditOutlined,{}),onClick:()=>v(`/coupon/update/${C.id}`),children:"\u7F16\u8F91"}):null;return(0,u.jsx)(d.Z,{breadcrumb:{items:F},title:"\u4F18\u60E0\u5238\u8BE6\u60C5",extra:[(0,u.jsx)(s.Button,{onClick:()=>v(-1),children:"\u8FD4\u56DE"}),R],children:(0,u.jsx)("div",{className:"page-coupon-detail",children:(0,u.jsx)(c.Z,{form:x,initialValues:O,submitter:!1,disabled:!0,children:(0,u.jsx)(P.ProFormDatePicker,{label:"\u521B\u5EFA\u65E5\u671F",width:"lg",name:"ctime"})})})})}},2655:(Z,M,e)=>{e.d(M,{Qi:()=>r,Ry:()=>I,U8:()=>P,Wb:()=>_,Xx:()=>g,ZP:()=>W,jS:()=>s,mi:()=>j,mu:()=>T});var u=e(8892);const _=new Map([[0,"\u6EE1\u51CF\u5238"],[1,"\u6298\u6263\u5238"]]);var g=(t=>(t[t.\u5E97\u94FA\u5546\u54C1\u5238=1]="\u5E97\u94FA\u5546\u54C1\u5238",t[t.\u5E97\u94FA\u901A\u7528\u5238=2]="\u5E97\u94FA\u901A\u7528\u5238",t[t.\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238=3]="\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238",t))(g||{});const r=new Map([[1,"\u5E97\u94FA\u5546\u54C1\u5238"],[2,"\u5E97\u94FA\u901A\u7528\u5238"],[3,"\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238"]]);var T=(t=>(t[t.\u5168\u90E8=-1]="\u5168\u90E8",t[t.\u672A\u5F00\u59CB=0]="\u672A\u5F00\u59CB",t[t.\u8FDB\u884C\u4E2D=1]="\u8FDB\u884C\u4E2D",t[t.\u5DF2\u7ED3\u675F=2]="\u5DF2\u7ED3\u675F",t[t.\u5DF2\u4E0B\u7EBF=6]="\u5DF2\u4E0B\u7EBF",t))(T||{});const s=new Map([[-1,"\u5168\u90E8"],[0,"\u672A\u5F00\u59CB"],[1,"\u8FDB\u884C\u4E2D"],[2,"\u5DF2\u7ED3\u675F"],[6,"\u5DF2\u4E0B\u7EBF"]]),I=new Map([[-1,""],[0,"gray"],[1,"green"],[2,"blue"],[6,"red"]]),P=new Map([[1,"1\u5F20"],[2,"2\u5F20"],[3,"3\u5F20"],[4,"\u4E0D\u9650"]]),U={async list(t){return u.ZP.get("/merchant/coupons",t)},detail(t){return u.ZP.get("/merchant/coupons",{id:t})},delete(t){return u.ZP.delete("/merchant/coupons",{id:t})},create(t){return u.ZP.post("/merchant/coupons",t)},update(t){return u.ZP.patch("/merchant/coupons",t)}},j=(t=10)=>t<2,W=U}}]);
