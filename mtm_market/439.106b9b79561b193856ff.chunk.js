"use strict";(window.webpackJsonp_mtm_market=window.webpackJsonp_mtm_market||[]).push([[439],{3343:(V,M,e)=>{e.d(M,{Z:()=>d});var u=e(5893),l=e(599),h=e.n(l),a=e(4047),R=e.n(a),F=e(7484),T=e.n(F);const{RangePicker:C}=a.DatePicker,d=({text:t,mode:s,fieldProps:j,render:p,renderFormItem:v})=>{const{value:B=[],onChange:P,defaultValue:_}=j,f=[...B],[W,O]=f;O&&(f[1]=O?.map(r=>T()(r)));const[y,K]=(0,l.useState)(B[1]?2:1),[n,o]=(0,l.useState)(f);if(s==="read"){const r=(0,u.jsx)("span",{children:O?f[1].map(m=>m.format()).join(" \u5230 "):`\u9886\u53D6\u540E ${W||"-"} \u5929`});return p?p(t,{mode:s,...j},r):r}if(s==="edit"||s==="update"){const r=E=>{K(E.target.value),m(E.target.value,n)},m=(E,A)=>{const c=[...A||[]],[,g]=c;g&&(c[1]=g?.map(N=>N.format("YYYY-MM-DD"))),E===1?c[1]=void 0:c[0]=void 0,P?.(c)},i=(E,A)=>{const c=[...n||[]];c[E]=A===null?void 0:A,o(c),m(y,c)},x=(0,u.jsx)(a.Radio.Group,{value:y,onChange:r,children:(0,u.jsxs)(a.Space,{direction:"vertical",children:[(0,u.jsx)(a.Radio,{value:1,children:(0,u.jsxs)(a.Space,{children:[(0,u.jsx)("span",{children:"\u9886\u53D6\u540E"}),(0,u.jsx)(a.InputNumber,{addonAfter:"\u5929",min:1,max:30,value:n?.[0],defaultValue:_?.[0],onChange:E=>i(0,E)})]})}),(0,u.jsx)(a.Radio,{value:2,children:(0,u.jsxs)(a.Space,{children:[(0,u.jsx)("span",{children:"\u81EA\u5B9A\u4E49"}),(0,u.jsx)(C,{value:n?.[1],defaultValue:_?.[1],onChange:E=>i(1,E)})]})})]})});return v?v(t,{mode:s,...j},x):x}}},1849:(V,M,e)=>{e.d(M,{Z:()=>t});var u=e(5893),l=e(2975),h=e.n(l),a=e(4047),R=e.n(a),F=e(2979),T=e.n(F);const C=(0,l.createHashRouter)([{}]);function U(s,j,p,v){var B;let P=s.path;const _=p.indexOf(s)===p.length-1;return _?(0,u.jsx)("span",{children:s.title}):s.href?(0,u.jsx)("a",{href:C.createHref({pathname:s.href}),onClick:f=>{f.preventDefault(),C.navigate(s.href)},children:s.title}):(((B=s.path)==null?void 0:B.indexOf("/"))!==0&&(P="/"+v.filter(f=>f).join("/")),console.log("paths",JSON.stringify(v),P),_?(0,u.jsx)("span",{children:s.title}):(0,u.jsx)(l.Link,{to:P,relative:"route",children:s.title}))}const t=({children:s,breadcrumb:j,title:p,icon:v,description:B,extra:P,..._})=>(0,u.jsxs)("div",{className:"micro-page-container",..._,children:[(0,u.jsxs)("div",{className:"micro-page-header",children:[(0,u.jsx)(a.Breadcrumb,{className:"micro-breadcrumb",separator:(0,u.jsx)(F.RightOutlined,{}),itemRender:U,...j}),(0,u.jsxs)(a.Row,{className:"micro-page-header-heading",align:"middle",children:[(0,u.jsx)(a.Col,{flex:1,children:(0,u.jsxs)("h2",{children:[typeof v=="string"?(0,u.jsx)("i",{className:`iconfont icon-${v}`}):v,p]})}),(0,u.jsx)(a.Col,{children:(0,u.jsx)(a.Space,{children:P})})]}),B&&(0,u.jsx)("div",{className:"micro-page-header-description",children:B})]}),(0,u.jsx)("div",{className:"micor-page-content",children:s})]})},6785:(V,M,e)=>{e.d(M,{Z:()=>K});var u=e(5893),l=e(4047),h=e(9018),a=e(6502);const R=(n,o)=>({fieldProps:m,proFieldProps:i,...x})=>(0,u.jsx)(a.Z,{valueType:o,render:(E,A,c)=>{const{mode:g}=A;return(0,u.jsx)(n,{text:E,mode:g,fieldProps:A})},renderFormItem:(E,A,c)=>{const{mode:g}=A;return(0,u.jsx)(n,{text:E,mode:g,fieldProps:A})},fieldProps:m,proFieldProps:i,...x});var F=e(599),T=e.n(F),C=e(869),U=e(2077),d=e.n(U);const t={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"\u5343",million:"\u767E\u4E07",billion:"\u5341\u4EBF",trillion:"\u5146"},ordinal(){return"."},currency:{symbol:"\xA5"}};d().register("locale","zh",t),d().locale("zh"),d().nullFormat(""),d().fn.round=function(n=2){return Math.round(Math.pow(10,n)*this.value())/Math.pow(10,n)},d().fn.isFloat=function(){const n=this.value();return parseInt(n,10)<parseFloat(n)},d().register("format","custom formats",{regexps:{format:/(&)/,unformat:/(&)/},format(n,o,r){const m=d()._.includes(o," %")?" ":"";let i;return n*=100,o=o.replace(/\s?%/,""),i=d()._.numberToFormat(n,o,r),d()._.includes(i,")")?(i=i.split(""),i.splice(-1,0,`${m}%`),i=i.join("")):i=`${i}${m}%`,i},unformat(n){return d()._.stringToNumber(n)*.01}});const s=null,j=({text:n,mode:o,render:r,placeholder:m,renderFormItem:i,fieldProps:x},E)=>{const{value:A,defaultValue:c,onChange:g,id:N,validator:z=[]}=x,[Y,w]=(0,F.useState)([]),[L,Z]=(0,C.Z)(()=>c,{value:A,onChange:g});if(o==="read"){const S=(0,u.jsxs)("span",{ref:E,children:["\u6EE1 ",n[0]||"-","\u5143 \u51CF ",n[1]||"-","\u5143"]});return r?r(n,{mode:o,...x},S):S}if(o==="edit"||o==="update"){const S=()=>{if(Array.isArray(L)){const[D,I]=L;typeof D=="number"&&typeof I=="number"&&D>I?Z([I,D]):D===void 0&&I===void 0&&Z(void 0)}},H=(D,I)=>{var Q;const X=[...L||[]];X[D]=I===null?void 0:I,Z(X),Y[D]={...(Q=z[D])==null?void 0:Q.call(z,X)},w(Y)},$=x?.placeholder||m||["\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB","\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"],J=D=>Array.isArray($)?$[D]:$,{className:k,...G}=x,b=(0,u.jsxs)(l.Space,{size:10,className:k,children:[(0,u.jsx)(l.InputNumber,{style:{width:"100%"},addonBefore:"\u6EE1",addonAfter:t.currency.symbol,min:0,max:5e3,...G,placeholder:J(0),id:`${N}-0`,value:L?.[0],defaultValue:c?.[0],onChange:D=>H(0,D)}),(0,u.jsx)(l.InputNumber,{style:{width:"100%"},addonBefore:"\u51CF",addonAfter:t.currency.symbol,min:0,max:5e3,...G,placeholder:J(1),id:`${N}-1`,value:L?.[1],defaultValue:c?.[1],onChange:D=>H(1,D)})]});return i?i(n,{mode:o,...x},b):b}return null},p=async(n,o)=>{const[r,m]=o;if(!r&&r!==0)throw new Error("\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB");if(!m&&m!==0)throw new Error("\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D")},v=[n=>{const[o,r]=n;if(!o&&o!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB"}},n=>{const[o,r]=n;if(!r&&r!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"};if(r<.01)return{status:"error",help:"\u9762\u989D\u6700\u5C0F\u503C\u662F0.01\u5143"};if(o===0){if(r>500)return{status:"error",help:"\u95E8\u69DB\u4E3A0\u65F6\uFF0C\u9762\u989D\u9700\u5C0F\u4E8E\u7B49\u4E8E500\u5143"};r>10}}],B=T().forwardRef(j),P=R(B,"AmountRule");var _=e(3343);const f=R(_.Z,"UseTerm");var W=e(2655);const O={labelCol:{flex:"0 0 110px"}},K=({children:n,...o})=>(0,u.jsxs)(h.ProForm,{layout:"horizontal",...O,submitter:{render:(r,m)=>(0,u.jsx)(l.Space,{style:{marginLeft:110},children:m})},...o,children:[(0,u.jsx)(h.ProFormText,{readonly:!0,getValueProps:r=>({value:W.Xx[r]}),width:"md",name:"target",label:"\u4F18\u60E0\u5238\u7C7B\u578B"}),(0,u.jsx)(h.ProFormText,{width:"lg",name:"name",label:"\u4F18\u60E0\u5238\u540D\u79F0",placeholder:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0"},{max:10,message:"\u4F18\u60E0\u5238\u540D\u79F0\u6700\u591A\u586B\u519910\u4E2A\u5B57"}]}),(0,u.jsx)(h.ProFormText,{readonly:!0,width:"md",name:"displayName",label:"\u4F18\u60E0\u5238\u6587\u6848"}),(0,u.jsx)(h.ProFormDateTimeRangePicker,{required:!0,width:"lg",name:"putTerm",label:"\u53D1\u653E\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u653E\u65F6\u95F4"}]}),(0,u.jsx)(h.ProFormDigit,{label:"\u53D1\u653E\u5F20\u6570",name:"stock",placeholder:"\u8BF7\u8F93\u51651-1,000,000\u7684\u6B63\u6574\u6570",width:"sm",min:1,max:1e6,rules:[{required:!0,message:"\u8BF7\u586B\u5199\u53D1\u653E\u5F20\u6570"}]}),(0,u.jsx)(P,{fieldProps:{validator:v},placeholder:["\u8BF7\u8F93\u5165\u95E8\u69DB","\u8BF7\u8F93\u5165\u9762\u989D"],name:"rule",label:"\u95E8\u69DB\u53CA\u9762\u989D",width:"lg",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u95E8\u69DB\u53CA\u9762\u989D"}]}),(0,u.jsx)(h.ProFormSelect,{name:"limit",label:"\u6BCF\u4EBA\u9650\u9886\u5F20\u6570",valueEnum:W.U8,placeholder:"\u8BF7\u9009\u62E9",width:"sm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6BCF\u4EBA\u9650\u9886\u5F20\u6570"}]}),(0,u.jsx)(f,{name:"useTerm",label:"\u4F7F\u7528\u65F6\u95F4",width:"lg",required:!0}),n]})},439:(V,M,e)=>{e.r(M),e.d(M,{default:()=>v});var u=e(5893),l=e(599),h=e.n(l),a=e(2975),R=e.n(a),F=e(4047),T=e.n(F),C=e(9018),U=e.n(C),d=e(2655),t=e(1849),s=e(6785);const j=[{title:"\u9996\u9875",href:"/"},{title:"\u8425\u9500\u4E2D\u5FC3",path:"/"},{title:"\u4F18\u60E0\u5238",path:"coupons"},{title:"\u7F16\u8F91\u4F18\u60E0\u5238",path:"update"}],v=()=>{const B=(0,a.useNavigate)(),P=(0,a.useParams)(),[_]=F.Form.useForm(),[f,W]=F.message.useMessage(),[O,y]=(0,l.useState)({});(0,l.useEffect)(()=>{d.ZP.detail(P.id).then(n=>{y(n),_.resetFields()})},[]);const K=async n=>{d.ZP.update(n).then(()=>{console.log("values",n),f.success("\u66F4\u65B0\u4F18\u60E0\u5238\u6210\u529F",1,()=>{B(-1)})})};return(0,u.jsxs)(t.Z,{breadcrumb:{items:j},title:"\u7F16\u8F91\u4F18\u60E0\u5238",extra:[(0,u.jsx)(F.Button,{onClick:()=>B(-1),children:"\u8FD4\u56DE"})],children:[W,(0,u.jsx)("div",{className:"page-coupon-detail",children:(0,u.jsx)(s.Z,{form:_,initialValues:O,onFinish:K,children:(0,u.jsx)(C.ProFormText,{hidden:!0,label:"\u4F18\u60E0\u5238ID",width:"lg",name:"id"})})})]})}},2655:(V,M,e)=>{e.d(M,{Ry:()=>F,U8:()=>T,Wb:()=>l,Xx:()=>h,ZP:()=>d,jS:()=>R,mi:()=>U,mu:()=>a});var u=e(8892);const l=new Map([[0,"\u6EE1\u51CF\u5238"],[1,"\u6298\u6263\u5238"]]);var h=(t=>(t[t.\u5E97\u94FA\u5546\u54C1\u5238=1]="\u5E97\u94FA\u5546\u54C1\u5238",t[t.\u5E97\u94FA\u901A\u7528\u5238=2]="\u5E97\u94FA\u901A\u7528\u5238",t[t.\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238=3]="\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238",t))(h||{}),a=(t=>(t[t.\u5168\u90E8=-1]="\u5168\u90E8",t[t.\u672A\u5F00\u59CB=0]="\u672A\u5F00\u59CB",t[t.\u8FDB\u884C\u4E2D=1]="\u8FDB\u884C\u4E2D",t[t.\u5DF2\u7ED3\u675F=2]="\u5DF2\u7ED3\u675F",t[t.\u5DF2\u4E0B\u7EBF=6]="\u5DF2\u4E0B\u7EBF",t))(a||{});const R=new Map([[-1,"\u5168\u90E8"],[0,"\u672A\u5F00\u59CB"],[1,"\u8FDB\u884C\u4E2D"],[2,"\u5DF2\u7ED3\u675F"],[6,"\u5DF2\u4E0B\u7EBF"]]),F=new Map([[-1,""],[0,"gray"],[1,"green"],[2,"blue"],[6,"red"]]),T=new Map([[1,"1\u5F20"],[2,"2\u5F20"],[3,"3\u5F20"],[4,"\u4E0D\u9650"]]),C={async list(t){return u.ZP.get("/merchant/coupons",t)},detail(t){return u.ZP.get("/merchant/coupons",{id:t})},delete(t){return u.ZP.delete("/merchant/coupons",{id:t})},create(t){return u.ZP.post("/merchant/coupons",t)},update(t){return u.ZP.patch("/merchant/coupons",t)}},U=(t=10)=>t<2,d=C}}]);
