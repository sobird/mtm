"use strict";(window.webpackJsonp_mtm_market=window.webpackJsonp_mtm_market||[]).push([[439],{3343:(V,C,t)=>{t.d(C,{Z:()=>R});var u=t(5893),c=t(599),M=t.n(c),n=t(4047),T=t.n(n),m=t(7484),O=t.n(m);const{RangePicker:f}=n.DatePicker,R=({text:d,mode:e,fieldProps:j,render:g,renderFormItem:h})=>{const{value:D=[],onChange:v,defaultValue:E}=j,B=[...D],[K,x]=B;x&&(B[1]=x?.map(a=>O()(a)));const[W,N]=(0,c.useState)(D[1]?2:1),[P,r]=(0,c.useState)(B);if(e==="read"){const a=(0,u.jsx)("span",{children:x?B[1].map(l=>l.format()).join(" \u5230 "):`\u9886\u53D6\u540E ${K||"-"} \u5929`});return g?g(d,{mode:e,...j},a):a}if(e==="edit"||e==="update"){const a=o=>{N(o.target.value),l(o.target.value,P)},l=(o,p)=>{const i=[...p||[]],[,A]=i;A&&(i[1]=A?.map(L=>L.format("YYYY-MM-DD"))),o===1?i[1]=void 0:i[0]=void 0,v?.(i)},F=(o,p)=>{const i=[...P||[]];i[o]=p===null?void 0:p,r(i),l(W,i)},s=(0,u.jsx)(n.Radio.Group,{value:W,onChange:a,children:(0,u.jsxs)(n.Space,{direction:"vertical",children:[(0,u.jsx)(n.Radio,{value:1,children:(0,u.jsxs)(n.Space,{children:[(0,u.jsx)("span",{children:"\u9886\u53D6\u540E"}),(0,u.jsx)(n.InputNumber,{addonAfter:"\u5929",min:1,max:30,value:P?.[0],defaultValue:E?.[0],onChange:o=>F(0,o)})]})}),(0,u.jsx)(n.Radio,{value:2,children:(0,u.jsxs)(n.Space,{children:[(0,u.jsx)("span",{children:"\u81EA\u5B9A\u4E49"}),(0,u.jsx)(f,{value:P?.[1],defaultValue:E?.[1],onChange:o=>F(1,o)})]})})]})});return h?h(d,{mode:e,...j},s):s}}},1849:(V,C,t)=>{t.d(C,{Z:()=>d});var u=t(5893),c=t(2975),M=t.n(c),n=t(4047),T=t.n(n),m=t(2979),O=t.n(m);const f=(0,c.createHashRouter)([{}]);function U(e,j,g,h){var D;let v=e.path;const E=g.indexOf(e)===g.length-1;return E?(0,u.jsx)("span",{children:e.title}):e.href?(0,u.jsx)("a",{href:f.createHref({pathname:e.href}),onClick:B=>{B.preventDefault(),f.navigate(e.href)},children:e.title}):(((D=e.path)==null?void 0:D.indexOf("/"))!==0&&(v="/"+h.filter(B=>B).join("/")),console.log("paths",JSON.stringify(h),v),E?(0,u.jsx)("span",{children:e.title}):(0,u.jsx)(c.Link,{to:v,relative:"route",children:e.title}))}const d=({children:e,breadcrumb:j,title:g,icon:h,description:D,extra:v,...E})=>(0,u.jsxs)("div",{className:"micro-page-container",...E,children:[(0,u.jsxs)("div",{className:"micro-page-header",children:[(0,u.jsx)(n.Breadcrumb,{className:"micro-breadcrumb",separator:(0,u.jsx)(m.RightOutlined,{}),itemRender:U,...j}),(0,u.jsxs)(n.Row,{className:"micro-page-header-heading",align:"middle",children:[(0,u.jsx)(n.Col,{flex:1,children:(0,u.jsxs)("h2",{children:[typeof h=="string"?(0,u.jsx)("i",{className:`iconfont icon-${h}`}):h,g]})}),(0,u.jsx)(n.Col,{children:(0,u.jsx)(n.Space,{children:v})})]}),D&&(0,u.jsx)("div",{className:"micro-page-header-description",children:D})]}),(0,u.jsx)(n.Card,{bodyStyle:{padding:16},className:"micor-page-content",children:e})]})},6785:(V,C,t)=>{t.d(C,{Z:()=>P});var u=t(5893),c=t(2975),M=t(4047),n=t(9018),T=t(6502);const m=(r,a)=>({fieldProps:F,proFieldProps:s,...o})=>(0,u.jsx)(T.Z,{valueType:a,render:(p,i,A)=>{const{mode:L}=i;return(0,u.jsx)(r,{text:p,mode:L,fieldProps:i})},renderFormItem:(p,i,A)=>{const{mode:L}=i;return(0,u.jsx)(r,{text:p,mode:L,fieldProps:i})},fieldProps:F,proFieldProps:s,...o});var O=t(599),f=t.n(O),U=t(869),R=t(2077),d=t.n(R);const e={delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"\u5343",million:"\u767E\u4E07",billion:"\u5341\u4EBF",trillion:"\u5146"},ordinal(){return"."},currency:{symbol:"\xA5"}};d().register("locale","zh",e),d().locale("zh"),d().nullFormat(""),d().fn.round=function(r=2){return Math.round(Math.pow(10,r)*this.value())/Math.pow(10,r)},d().fn.isFloat=function(){const r=this.value();return parseInt(r,10)<parseFloat(r)},d().register("format","custom formats",{regexps:{format:/(&)/,unformat:/(&)/},format(r,a,l){const F=d()._.includes(a," %")?" ":"";let s;return r*=100,a=a.replace(/\s?%/,""),s=d()._.numberToFormat(r,a,l),d()._.includes(s,")")?(s=s.split(""),s.splice(-1,0,`${F}%`),s=s.join("")):s=`${s}${F}%`,s},unformat(r){return d()._.stringToNumber(r)*.01}});const j=null,g=({text:r,mode:a,render:l,placeholder:F,renderFormItem:s,fieldProps:o},p)=>{const{value:i,defaultValue:A,onChange:L,id:z,validator:Y=[]}=o,[H,k]=(0,O.useState)([]),[I,Z]=(0,U.Z)(()=>A,{value:i,onChange:L});if(a==="read"){const S=(0,u.jsxs)("span",{ref:p,children:["\u6EE1 ",r[0]||"-","\u5143 \u51CF ",r[1]||"-","\u5143"]});return l?l(r,{mode:a,...o},S):S}if(a==="edit"||a==="update"){const S=()=>{if(Array.isArray(I)){const[_,y]=I;typeof _=="number"&&typeof y=="number"&&_>y?Z([y,_]):_===void 0&&y===void 0&&Z(void 0)}},J=(_,y)=>{var w;const X=[...I||[]];X[_]=y===null?void 0:y,Z(X),H[_]={...(w=Y[_])==null?void 0:w.call(Y,X)},k(H)},$=o?.placeholder||F||["\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB","\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"],G=_=>Array.isArray($)?$[_]:$,{className:q,...Q}=o,b=(0,u.jsxs)(M.Space,{size:10,className:q,children:[(0,u.jsx)(M.InputNumber,{style:{width:"100%"},addonBefore:"\u6EE1",addonAfter:e.currency.symbol,min:0,max:5e3,...Q,placeholder:G(0),id:`${z}-0`,value:I?.[0],defaultValue:A?.[0],onChange:_=>J(0,_)}),(0,u.jsx)(M.InputNumber,{style:{width:"100%"},addonBefore:"\u51CF",addonAfter:e.currency.symbol,min:0,max:5e3,...Q,placeholder:G(1),id:`${z}-1`,value:I?.[1],defaultValue:A?.[1],onChange:_=>J(1,_)})]});return s?s(r,{mode:a,...o},b):b}return null},h=async(r,a)=>{const[l,F]=a;if(!l&&l!==0)throw new Error("\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB");if(!F&&F!==0)throw new Error("\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D")},D=[r=>{const[a,l]=r;if(!a&&a!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u6EE1\u51CF\u95E8\u69DB"}},r=>{const[a,l]=r;if(!l&&l!==0)return{status:"error",help:"\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"};if(l<.01)return{status:"error",help:"\u9762\u989D\u6700\u5C0F\u503C\u662F0.01\u5143"};if(a===0){if(l>500)return{status:"error",help:"\u95E8\u69DB\u4E3A0\u65F6\uFF0C\u9762\u989D\u9700\u5C0F\u4E8E\u7B49\u4E8E500\u5143"};l>10}}],v=f().forwardRef(g),E=m(v,"AmountRule");var B=t(3343);const K=m(B.Z,"UseTerm");var x=t(2655);const W={labelCol:{flex:"0 0 110px"}},P=({children:r,mode:a,...l})=>{const[,F]=(0,c.useSearchParams)();return(0,u.jsxs)(n.ProForm,{layout:"horizontal",...W,submitter:{render:(s,o)=>(0,u.jsx)(M.Space,{style:{marginLeft:110},children:o})},...l,children:[(0,u.jsx)(n.ProFormSelect,{name:"target",label:"\u4F18\u60E0\u5238\u7C7B\u578B",valueEnum:x.Qi,placeholder:"\u8BF7\u9009\u62E9",width:"lg",allowClear:!1,disabled:a&&a==="update",onChange:s=>{F(o=>(o.set("target",s),o),{replace:!0})}}),(0,u.jsx)(n.ProFormText,{width:"lg",name:"name",label:"\u4F18\u60E0\u5238\u540D\u79F0",placeholder:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u4F18\u60E0\u5238\u540D\u79F0"},{max:10,message:"\u4F18\u60E0\u5238\u540D\u79F0\u6700\u591A\u586B\u519910\u4E2A\u5B57"}]}),(0,u.jsx)(n.ProFormText,{readonly:!0,width:"lg",name:"displayName",label:"\u4F18\u60E0\u5238\u6587\u6848"}),(0,u.jsx)(n.ProFormDateTimeRangePicker,{required:!0,width:"lg",name:"putTerm",label:"\u53D1\u653E\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u53D1\u653E\u65F6\u95F4"}]}),(0,u.jsx)(n.ProFormDigit,{label:"\u53D1\u653E\u5F20\u6570",name:"stock",placeholder:"\u8BF7\u8F93\u51651-1,000,000\u7684\u6B63\u6574\u6570",width:"lg",min:1,max:1e6,rules:[{required:!0,message:"\u8BF7\u586B\u5199\u53D1\u653E\u5F20\u6570"}]}),(0,u.jsx)(E,{fieldProps:{validator:D},placeholder:["\u8BF7\u8F93\u5165\u95E8\u69DB","\u8BF7\u8F93\u5165\u9762\u989D"],name:"rule",label:"\u95E8\u69DB\u53CA\u9762\u989D",width:"lg",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u95E8\u69DB\u53CA\u9762\u989D"}]}),(0,u.jsx)(n.ProFormSelect,{name:"limit",label:"\u6BCF\u4EBA\u9650\u9886\u5F20\u6570",valueEnum:x.U8,placeholder:"\u8BF7\u9009\u62E9",width:"lg",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6BCF\u4EBA\u9650\u9886\u5F20\u6570"}]}),(0,u.jsx)(K,{name:"useTerm",label:"\u4F7F\u7528\u65F6\u95F4",width:"lg",required:!0}),r]})}},439:(V,C,t)=>{t.r(C),t.d(C,{default:()=>h});var u=t(5893),c=t(599),M=t.n(c),n=t(2975),T=t.n(n),m=t(4047),O=t.n(m),f=t(9018),U=t.n(f),R=t(1849),d=t(6785),e=t(2655);const j=[{title:"\u9996\u9875",href:"/"},{title:"\u8425\u9500\u4E2D\u5FC3",path:"/"},{title:"\u4F18\u60E0\u5238",path:"coupons"},{title:"\u7F16\u8F91\u4F18\u60E0\u5238",path:"update"}],h=()=>{const D=(0,n.useNavigate)(),v=(0,n.useParams)(),[E]=m.Form.useForm(),[B,K]=m.message.useMessage(),[x,W]=(0,c.useState)();(0,c.useEffect)(()=>{e.ZP.detail(v.id).then(P=>{W(P),setTimeout(()=>{E.resetFields()},0)})},[]);const N=async P=>{e.ZP.update(P).then(()=>{B.success("\u66F4\u65B0\u4F18\u60E0\u5238\u6210\u529F",1,()=>{D(-1)})})};return(0,u.jsxs)(R.Z,{breadcrumb:{items:j},title:"\u7F16\u8F91\u4F18\u60E0\u5238",extra:[(0,u.jsx)(m.Button,{onClick:()=>D(-1),children:"\u8FD4\u56DE"})],children:[K,(0,u.jsx)("div",{className:"page-coupon-detail",children:(0,u.jsx)(d.Z,{form:E,initialValues:x,onFinish:N,mode:"update",children:(0,u.jsx)(f.ProFormText,{hidden:!0,label:"\u4F18\u60E0\u5238ID",width:"lg",name:"id"})})})]})}},2655:(V,C,t)=>{t.d(C,{Qi:()=>n,Ry:()=>O,U8:()=>f,Wb:()=>c,Xx:()=>M,ZP:()=>d,jS:()=>m,mi:()=>R,mu:()=>T});var u=t(8892);const c=new Map([[0,"\u6EE1\u51CF\u5238"],[1,"\u6298\u6263\u5238"]]);var M=(e=>(e[e.\u5E97\u94FA\u5546\u54C1\u5238=1]="\u5E97\u94FA\u5546\u54C1\u5238",e[e.\u5E97\u94FA\u901A\u7528\u5238=2]="\u5E97\u94FA\u901A\u7528\u5238",e[e.\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238=3]="\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238",e))(M||{});const n=new Map([[1,"\u5E97\u94FA\u5546\u54C1\u5238"],[2,"\u5E97\u94FA\u901A\u7528\u5238"],[3,"\u5E97\u94FA\u5BA2\u670D\u4F53\u9A8C\u5238"]]);var T=(e=>(e[e.\u5168\u90E8=-1]="\u5168\u90E8",e[e.\u672A\u5F00\u59CB=0]="\u672A\u5F00\u59CB",e[e.\u8FDB\u884C\u4E2D=1]="\u8FDB\u884C\u4E2D",e[e.\u5DF2\u7ED3\u675F=2]="\u5DF2\u7ED3\u675F",e[e.\u5DF2\u4E0B\u7EBF=6]="\u5DF2\u4E0B\u7EBF",e))(T||{});const m=new Map([[-1,"\u5168\u90E8"],[0,"\u672A\u5F00\u59CB"],[1,"\u8FDB\u884C\u4E2D"],[2,"\u5DF2\u7ED3\u675F"],[6,"\u5DF2\u4E0B\u7EBF"]]),O=new Map([[-1,""],[0,"gray"],[1,"green"],[2,"blue"],[6,"red"]]),f=new Map([[1,"1\u5F20"],[2,"2\u5F20"],[3,"3\u5F20"],[4,"\u4E0D\u9650"]]),U={async list(e){return u.ZP.get("/merchant/coupons",e)},detail(e){return u.ZP.get("/merchant/coupons",{id:e})},delete(e){return u.ZP.delete("/merchant/coupons",{id:e})},create(e){return u.ZP.post("/merchant/coupons",e)},update(e){return u.ZP.patch("/merchant/coupons",e)}},R=(e=10)=>e<2,d=U}}]);
