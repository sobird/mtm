{"version":3,"file":"619.45fc602bd18af0286d6f.chunk.js","mappings":"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","sources":["webpack:///./node_modules/@ant-design/icons-svg/es/asn/MobileOutlined.js","webpack:///./node_modules/@ant-design/icons/es/icons/MobileOutlined.js","webpack:///./node_modules/jose/dist/browser/lib/buffer_utils.js","webpack:///./node_modules/jose/dist/browser/runtime/base64url.js","webpack:///./node_modules/jose/dist/browser/util/errors.js","webpack:///./node_modules/jose/dist/browser/runtime/webcrypto.js","webpack:///./node_modules/jose/dist/browser/runtime/random.js","webpack:///./node_modules/jose/dist/browser/lib/iv.js","webpack:///./node_modules/jose/dist/browser/lib/check_iv_length.js","webpack:///./node_modules/jose/dist/browser/runtime/check_cek_length.js","webpack:///./node_modules/jose/dist/browser/runtime/decrypt.js","webpack:///./node_modules/jose/dist/browser/runtime/zlib.js","webpack:///./node_modules/jose/dist/browser/runtime/bogus.js","webpack:///./node_modules/jose/dist/browser/runtime/aeskw.js","webpack:///./node_modules/jose/dist/browser/runtime/ecdhes.js","webpack:///./node_modules/jose/dist/browser/lib/check_p2s.js","webpack:///./node_modules/jose/dist/browser/runtime/pbes2kw.js","webpack:///./node_modules/jose/dist/browser/runtime/subtle_rsaes.js","webpack:///./node_modules/jose/dist/browser/runtime/rsaes.js","webpack:///./node_modules/jose/dist/browser/lib/cek.js","webpack:///./node_modules/jose/dist/browser/runtime/asn1.js","webpack:///./node_modules/jose/dist/browser/runtime/jwk_to_key.js","webpack:///./node_modules/jose/dist/browser/key/import.js","webpack:///./node_modules/jose/dist/browser/runtime/encrypt.js","webpack:///./node_modules/jose/dist/browser/lib/aesgcmkw.js","webpack:///./node_modules/jose/dist/browser/lib/decrypt_key_management.js","webpack:///./node_modules/jose/dist/browser/lib/validate_crit.js","webpack:///./node_modules/jose/dist/browser/jwe/flattened/decrypt.js","webpack:///./node_modules/jose/dist/browser/jwe/compact/decrypt.js","webpack:///./node_modules/jose/dist/browser/jwe/general/decrypt.js","webpack:///./node_modules/jose/dist/browser/runtime/key_to_jwk.js","webpack:///./node_modules/jose/dist/browser/key/export.js","webpack:///./node_modules/jose/dist/browser/lib/encrypt_key_management.js","webpack:///./node_modules/jose/dist/browser/jwe/flattened/encrypt.js","webpack:///./node_modules/jose/dist/browser/jwe/general/encrypt.js","webpack:///./node_modules/jose/dist/browser/runtime/subtle_dsa.js","webpack:///./node_modules/jose/dist/browser/runtime/verify.js","webpack:///./node_modules/jose/dist/browser/jws/flattened/verify.js","webpack:///./node_modules/jose/dist/browser/jws/compact/verify.js","webpack:///./node_modules/jose/dist/browser/jws/general/verify.js","webpack:///./node_modules/jose/dist/browser/lib/secs.js","webpack:///./node_modules/jose/dist/browser/lib/jwt_claims_set.js","webpack:///./node_modules/jose/dist/browser/jwt/verify.js","webpack:///./node_modules/jose/dist/browser/jwt/decrypt.js","webpack:///./node_modules/jose/dist/browser/jwe/compact/encrypt.js","webpack:///./node_modules/jose/dist/browser/runtime/check_key_length.js","webpack:///./node_modules/jose/dist/browser/lib/crypto_key.js","webpack:///./node_modules/jose/dist/browser/lib/invalid_key_input.js","webpack:///./node_modules/jose/dist/browser/runtime/is_key_like.js","webpack:///./node_modules/jose/dist/browser/runtime/get_sign_verify_key.js","webpack:///./node_modules/jose/dist/browser/runtime/sign.js","webpack:///./node_modules/jose/dist/browser/lib/is_disjoint.js","webpack:///./node_modules/jose/dist/browser/lib/check_key_type.js","webpack:///./node_modules/jose/dist/browser/jws/flattened/sign.js","webpack:///./node_modules/jose/dist/browser/jws/compact/sign.js","webpack:///./node_modules/jose/dist/browser/jws/general/sign.js","webpack:///./node_modules/jose/dist/browser/lib/epoch.js","webpack:///./node_modules/jose/dist/browser/lib/is_object.js","webpack:///./node_modules/jose/dist/browser/jwt/produce.js","webpack:///./node_modules/jose/dist/browser/jwt/sign.js","webpack:///./node_modules/jose/dist/browser/jwt/encrypt.js","webpack:///./node_modules/jose/dist/browser/jwk/thumbprint.js","webpack:///./node_modules/jose/dist/browser/jwk/embedded.js","webpack:///./node_modules/jose/dist/browser/jwks/local.js","webpack:///./node_modules/jose/dist/browser/runtime/fetch_jwks.js","webpack:///./node_modules/jose/dist/browser/jwks/remote.js","webpack:///./node_modules/jose/dist/browser/jwt/unsecured.js","webpack:///./node_modules/jose/dist/browser/util/base64url.js","webpack:///./node_modules/jose/dist/browser/util/decode_protected_header.js","webpack:///./node_modules/jose/dist/browser/util/decode_jwt.js","webpack:///./node_modules/jose/dist/browser/runtime/generate.js","webpack:///./node_modules/jose/dist/browser/key/generate_key_pair.js","webpack:///./node_modules/jose/dist/browser/key/generate_secret.js"],"sourcesContent":["// This icon file is generated automatically.\nvar MobileOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M744 62H280c-35.3 0-64 28.7-64 64v768c0 35.3 28.7 64 64 64h464c35.3 0 64-28.7 64-64V126c0-35.3-28.7-64-64-64zm-8 824H288V134h448v752zM472 784a40 40 0 1080 0 40 40 0 10-80 0z\" } }] }, \"name\": \"mobile\", \"theme\": \"outlined\" };\nexport default MobileOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport MobileOutlinedSvg from \"@ant-design/icons-svg/es/asn/MobileOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar MobileOutlined = function MobileOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: MobileOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  MobileOutlined.displayName = 'MobileOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(MobileOutlined);","import digest from '../runtime/digest.js';\nexport const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    buffers.forEach((buffer) => {\n        buf.set(buffer, i);\n        i += buffer.length;\n    });\n    return buf;\n}\nexport function p2s(alg, p2sInput) {\n    return concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\nexport function lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nexport async function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\n","import { encoder, decoder } from '../lib/buffer_utils.js';\nexport const encodeBase64 = (input) => {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < unencoded.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, unencoded.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n};\nexport const encode = (input) => {\n    return encodeBase64(input).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nexport const decodeBase64 = (encoded) => {\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n};\nexport const decode = (input) => {\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch (_a) {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n};\n","export class JOSEError extends Error {\n    static get code() {\n        return 'ERR_JOSE_GENERIC';\n    }\n    constructor(message) {\n        var _a;\n        super(message);\n        this.code = 'ERR_JOSE_GENERIC';\n        this.name = this.constructor.name;\n        (_a = Error.captureStackTrace) === null || _a === void 0 ? void 0 : _a.call(Error, this, this.constructor);\n    }\n}\nexport class JWTClaimValidationFailed extends JOSEError {\n    static get code() {\n        return 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    }\n    constructor(message, claim = 'unspecified', reason = 'unspecified') {\n        super(message);\n        this.code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n        this.claim = claim;\n        this.reason = reason;\n    }\n}\nexport class JWTExpired extends JOSEError {\n    static get code() {\n        return 'ERR_JWT_EXPIRED';\n    }\n    constructor(message, claim = 'unspecified', reason = 'unspecified') {\n        super(message);\n        this.code = 'ERR_JWT_EXPIRED';\n        this.claim = claim;\n        this.reason = reason;\n    }\n}\nexport class JOSEAlgNotAllowed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n    static get code() {\n        return 'ERR_JOSE_ALG_NOT_ALLOWED';\n    }\n}\nexport class JOSENotSupported extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JOSE_NOT_SUPPORTED';\n    }\n    static get code() {\n        return 'ERR_JOSE_NOT_SUPPORTED';\n    }\n}\nexport class JWEDecryptionFailed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_DECRYPTION_FAILED';\n        this.message = 'decryption operation failed';\n    }\n    static get code() {\n        return 'ERR_JWE_DECRYPTION_FAILED';\n    }\n}\nexport class JWEInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWE_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWE_INVALID';\n    }\n}\nexport class JWSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWS_INVALID';\n    }\n}\nexport class JWTInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWT_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWT_INVALID';\n    }\n}\nexport class JWKInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWK_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWK_INVALID';\n    }\n}\nexport class JWKSInvalid extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_INVALID';\n    }\n    static get code() {\n        return 'ERR_JWKS_INVALID';\n    }\n}\nexport class JWKSNoMatchingKey extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_NO_MATCHING_KEY';\n        this.message = 'no applicable key found in the JSON Web Key Set';\n    }\n    static get code() {\n        return 'ERR_JWKS_NO_MATCHING_KEY';\n    }\n}\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n        this.message = 'multiple matching keys found in the JSON Web Key Set';\n    }\n    static get code() {\n        return 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    }\n}\nSymbol.asyncIterator;\nexport class JWKSTimeout extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWKS_TIMEOUT';\n        this.message = 'request timed out';\n    }\n    static get code() {\n        return 'ERR_JWKS_TIMEOUT';\n    }\n}\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    constructor() {\n        super(...arguments);\n        this.code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n        this.message = 'signature verification failed';\n    }\n    static get code() {\n        return 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    }\n}\n","export default crypto;\nexport const isCryptoKey = (key) => key instanceof CryptoKey;\n","import crypto from './webcrypto.js';\nexport default crypto.getRandomValues.bind(crypto);\n","import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A128GCMKW':\n        case 'A192GCM':\n        case 'A192GCMKW':\n        case 'A256GCM':\n        case 'A256GCMKW':\n            return 96;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            return 128;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n","import { JWEInvalid } from '../util/errors.js';\nimport { bitLength } from './iv.js';\nconst checkIvLength = (enc, iv) => {\n    if (iv.length << 3 !== bitLength(enc)) {\n        throw new JWEInvalid('Invalid Initialization Vector length');\n    }\n};\nexport default checkIvLength;\n","import { JWEInvalid } from '../util/errors.js';\nconst checkCekLength = (cek, expected) => {\n    const actual = cek.byteLength << 3;\n    if (actual !== expected) {\n        throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);\n    }\n};\nexport default checkCekLength;\n","import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport timingSafeEqual from './timing_safe_equal.js';\nimport { JOSENotSupported, JWEDecryptionFailed } from '../util/errors.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nasync function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const expectedTag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    let macCheckPassed;\n    try {\n        macCheckPassed = timingSafeEqual(tag, expectedTag);\n    }\n    catch (_a) {\n    }\n    if (!macCheckPassed) {\n        throw new JWEDecryptionFailed();\n    }\n    let plaintext;\n    try {\n        plaintext = new Uint8Array(await crypto.subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));\n    }\n    catch (_b) {\n    }\n    if (!plaintext) {\n        throw new JWEDecryptionFailed();\n    }\n    return plaintext;\n}\nasync function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'decrypt');\n        encKey = cek;\n    }\n    try {\n        return new Uint8Array(await crypto.subtle.decrypt({\n            additionalData: aad,\n            iv,\n            name: 'AES-GCM',\n            tagLength: 128,\n        }, encKey, concat(ciphertext, tag)));\n    }\n    catch (_a) {\n        throw new JWEDecryptionFailed();\n    }\n}\nconst decrypt = async (enc, cek, ciphertext, iv, tag, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default decrypt;\n","import { JOSENotSupported } from '../util/errors.js';\nexport const inflate = async () => {\n    throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `inflateRaw` decrypt option to provide Inflate Raw implementation.');\n};\nexport const deflate = async () => {\n    throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported by your javascript runtime. You need to use the `deflateRaw` encrypt option to provide Deflate Raw implementation.');\n};\n","const bogusWebCrypto = [\n    { hash: 'SHA-256', name: 'HMAC' },\n    true,\n    ['sign'],\n];\nexport default bogusWebCrypto;\n","import bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction checkKeySize(key, alg) {\n    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {\n        throw new TypeError(`Invalid key size for alg: ${alg}`);\n    }\n}\nfunction getCryptoKey(key, alg, usage) {\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, usage);\n        return key;\n    }\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'AES-KW', true, [usage]);\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nexport const wrap = async (alg, key, cek) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));\n};\nexport const unwrap = async (alg, key, encryptedKey) => {\n    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', ...bogusWebCrypto);\n    return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n};\n","import { encoder, concat, uint32be, lengthAndInput, concatKdf } from '../lib/buffer_utils.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {\n    if (!isCryptoKey(publicKey)) {\n        throw new TypeError(invalidKeyInput(publicKey, ...types));\n    }\n    checkEncCryptoKey(publicKey, 'ECDH');\n    if (!isCryptoKey(privateKey)) {\n        throw new TypeError(invalidKeyInput(privateKey, ...types));\n    }\n    checkEncCryptoKey(privateKey, 'ECDH', 'deriveBits');\n    const value = concat(lengthAndInput(encoder.encode(algorithm)), lengthAndInput(apu), lengthAndInput(apv), uint32be(keyLength));\n    let length;\n    if (publicKey.algorithm.name === 'X25519') {\n        length = 256;\n    }\n    else if (publicKey.algorithm.name === 'X448') {\n        length = 448;\n    }\n    else {\n        length =\n            Math.ceil(parseInt(publicKey.algorithm.namedCurve.substr(-3), 10) / 8) << 3;\n    }\n    const sharedSecret = new Uint8Array(await crypto.subtle.deriveBits({\n        name: publicKey.algorithm.name,\n        public: publicKey,\n    }, privateKey, length));\n    return concatKdf(sharedSecret, keyLength, value);\n}\nexport async function generateEpk(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return crypto.subtle.generateKey(key.algorithm, true, ['deriveBits']);\n}\nexport function ecdhAllowed(key) {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    return (['P-256', 'P-384', 'P-521'].includes(key.algorithm.namedCurve) ||\n        key.algorithm.name === 'X25519' ||\n        key.algorithm.name === 'X448');\n}\n","import { JWEInvalid } from '../util/errors.js';\nexport default function checkP2s(p2s) {\n    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {\n        throw new JWEInvalid('PBES2 Salt Input must be 8 or more octets');\n    }\n}\n","import random from './random.js';\nimport { p2s as concatSalt } from '../lib/buffer_utils.js';\nimport { encode as base64url } from './base64url.js';\nimport { wrap, unwrap } from './aeskw.js';\nimport checkP2s from '../lib/check_p2s.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nfunction getCryptoKey(key, alg) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);\n    }\n    if (isCryptoKey(key)) {\n        checkEncCryptoKey(key, alg, 'deriveBits', 'deriveKey');\n        return key;\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\nasync function deriveKey(p2s, alg, p2c, key) {\n    checkP2s(p2s);\n    const salt = concatSalt(alg, p2s);\n    const keylen = parseInt(alg.slice(13, 16), 10);\n    const subtleAlg = {\n        hash: `SHA-${alg.slice(8, 11)}`,\n        iterations: p2c,\n        name: 'PBKDF2',\n        salt,\n    };\n    const wrapAlg = {\n        length: keylen,\n        name: 'AES-KW',\n    };\n    const cryptoKey = await getCryptoKey(key, alg);\n    if (cryptoKey.usages.includes('deriveBits')) {\n        return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg, cryptoKey, keylen));\n    }\n    if (cryptoKey.usages.includes('deriveKey')) {\n        return crypto.subtle.deriveKey(subtleAlg, cryptoKey, wrapAlg, false, ['wrapKey', 'unwrapKey']);\n    }\n    throw new TypeError('PBKDF2 key \"usages\" must include \"deriveBits\" or \"deriveKey\"');\n}\nexport const encrypt = async (alg, key, cek, p2c = 2048, p2s = random(new Uint8Array(16))) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    const encryptedKey = await wrap(alg.slice(-6), derived, cek);\n    return { encryptedKey, p2c, p2s: base64url(p2s) };\n};\nexport const decrypt = async (alg, key, encryptedKey, p2c, p2s) => {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    return unwrap(alg.slice(-6), derived, encryptedKey);\n};\n","import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleRsaEs(alg) {\n    switch (alg) {\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            return 'RSA-OAEP';\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n","import subtleAlgorithm from './subtle_rsaes.js';\nimport bogusWebCrypto from './bogus.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport checkKeyLength from './check_key_length.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport const encrypt = async (alg, key, cek) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'encrypt', 'wrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('encrypt')) {\n        return new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg), key, cek));\n    }\n    if (key.usages.includes('wrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, key, subtleAlgorithm(alg)));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"encrypt\" or \"wrapKey\" for this operation');\n};\nexport const decrypt = async (alg, key, encryptedKey) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    checkEncCryptoKey(key, alg, 'decrypt', 'unwrapKey');\n    checkKeyLength(alg, key);\n    if (key.usages.includes('decrypt')) {\n        return new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg), key, encryptedKey));\n    }\n    if (key.usages.includes('unwrapKey')) {\n        const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, key, subtleAlgorithm(alg), ...bogusWebCrypto);\n        return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n    }\n    throw new TypeError('RSA-OAEP key \"usages\" must include \"decrypt\" or \"unwrapKey\" for this operation');\n};\n","import { JOSENotSupported } from '../util/errors.js';\nimport random from '../runtime/random.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n            return 128;\n        case 'A192GCM':\n            return 192;\n        case 'A256GCM':\n        case 'A128CBC-HS256':\n            return 256;\n        case 'A192CBC-HS384':\n            return 384;\n        case 'A256CBC-HS512':\n            return 512;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => random(new Uint8Array(bitLength(alg) >> 3));\n","import crypto, { isCryptoKey } from './webcrypto.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { encodeBase64, decodeBase64 } from './base64url.js';\nimport formatPEM from '../lib/format_pem.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { types } from './is_key_like.js';\nconst genericExport = async (keyType, keyFormat, key) => {\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types));\n    }\n    if (!key.extractable) {\n        throw new TypeError('CryptoKey is not extractable');\n    }\n    if (key.type !== keyType) {\n        throw new TypeError(`key is not a ${keyType} key`);\n    }\n    return formatPEM(encodeBase64(new Uint8Array(await crypto.subtle.exportKey(keyFormat, key))), `${keyType.toUpperCase()} KEY`);\n};\nexport const toSPKI = (key) => {\n    return genericExport('public', 'spki', key);\n};\nexport const toPKCS8 = (key) => {\n    return genericExport('private', 'pkcs8', key);\n};\nconst findOid = (keyData, oid, from = 0) => {\n    if (from === 0) {\n        oid.unshift(oid.length);\n        oid.unshift(0x06);\n    }\n    let i = keyData.indexOf(oid[0], from);\n    if (i === -1)\n        return false;\n    const sub = keyData.subarray(i, i + oid.length);\n    if (sub.length !== oid.length)\n        return false;\n    return sub.every((value, index) => value === oid[index]) || findOid(keyData, oid, i + 1);\n};\nconst getNamedCurve = (keyData) => {\n    switch (true) {\n        case findOid(keyData, [0x2a, 0x86, 0x48, 0xce, 0x3d, 0x03, 0x01, 0x07]):\n            return 'P-256';\n        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x22]):\n            return 'P-384';\n        case findOid(keyData, [0x2b, 0x81, 0x04, 0x00, 0x23]):\n            return 'P-521';\n        case findOid(keyData, [0x2b, 0x65, 0x6e]):\n            return 'X25519';\n        case findOid(keyData, [0x2b, 0x65, 0x6f]):\n            return 'X448';\n        case findOid(keyData, [0x2b, 0x65, 0x70]):\n            return 'Ed25519';\n        case findOid(keyData, [0x2b, 0x65, 0x71]):\n            return 'Ed448';\n        default:\n            throw new JOSENotSupported('Invalid or unsupported EC Key Curve or OKP Key Sub Type');\n    }\n};\nconst genericImport = async (replace, keyFormat, pem, alg, options) => {\n    var _a;\n    let algorithm;\n    let keyUsages;\n    const keyData = new Uint8Array(atob(pem.replace(replace, ''))\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n    const isPublic = keyFormat === 'spki';\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            algorithm = { name: 'RSA-PSS', hash: `SHA-${alg.slice(-3)}` };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${alg.slice(-3)}` };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            algorithm = {\n                name: 'RSA-OAEP',\n                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,\n            };\n            keyUsages = isPublic ? ['encrypt', 'wrapKey'] : ['decrypt', 'unwrapKey'];\n            break;\n        case 'ES256':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ES384':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ES512':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            const namedCurve = getNamedCurve(keyData);\n            algorithm = namedCurve.startsWith('P-') ? { name: 'ECDH', namedCurve } : { name: namedCurve };\n            keyUsages = isPublic ? [] : ['deriveBits'];\n            break;\n        }\n        case 'EdDSA':\n            algorithm = { name: getNamedCurve(keyData) };\n            keyUsages = isPublic ? ['verify'] : ['sign'];\n            break;\n        default:\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (Algorithm) value');\n    }\n    return crypto.subtle.importKey(keyFormat, keyData, algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);\n};\nexport const fromPKCS8 = (pem, alg, options) => {\n    return genericImport(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\\s)/g, 'pkcs8', pem, alg, options);\n};\nexport const fromSPKI = (pem, alg, options) => {\n    return genericImport(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\\s)/g, 'spki', pem, alg, options);\n};\nfunction getElement(seq) {\n    let result = [];\n    let next = 0;\n    while (next < seq.length) {\n        let nextPart = parseElement(seq.subarray(next));\n        result.push(nextPart);\n        next += nextPart.byteLength;\n    }\n    return result;\n}\nfunction parseElement(bytes) {\n    let position = 0;\n    let tag = bytes[0] & 0x1f;\n    position++;\n    if (tag === 0x1f) {\n        tag = 0;\n        while (bytes[position] >= 0x80) {\n            tag = tag * 128 + bytes[position] - 0x80;\n            position++;\n        }\n        tag = tag * 128 + bytes[position] - 0x80;\n        position++;\n    }\n    let length = 0;\n    if (bytes[position] < 0x80) {\n        length = bytes[position];\n        position++;\n    }\n    else if (length === 0x80) {\n        length = 0;\n        while (bytes[position + length] !== 0 || bytes[position + length + 1] !== 0) {\n            if (length > bytes.byteLength) {\n                throw new TypeError('invalid indefinite form length');\n            }\n            length++;\n        }\n        const byteLength = position + length + 2;\n        return {\n            byteLength,\n            contents: bytes.subarray(position, position + length),\n            raw: bytes.subarray(0, byteLength),\n        };\n    }\n    else {\n        let numberOfDigits = bytes[position] & 0x7f;\n        position++;\n        length = 0;\n        for (let i = 0; i < numberOfDigits; i++) {\n            length = length * 256 + bytes[position];\n            position++;\n        }\n    }\n    const byteLength = position + length;\n    return {\n        byteLength,\n        contents: bytes.subarray(position, byteLength),\n        raw: bytes.subarray(0, byteLength),\n    };\n}\nfunction spkiFromX509(buf) {\n    const tbsCertificate = getElement(getElement(parseElement(buf).contents)[0].contents);\n    return encodeBase64(tbsCertificate[tbsCertificate[0].raw[0] === 0xa0 ? 6 : 5].raw);\n}\nfunction getSPKI(x509) {\n    const pem = x509.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\\s)/g, '');\n    const raw = decodeBase64(pem);\n    return formatPEM(spkiFromX509(raw), 'PUBLIC KEY');\n}\nexport const fromX509 = (pem, alg, options) => {\n    let spki;\n    try {\n        spki = getSPKI(pem);\n    }\n    catch (cause) {\n        throw new TypeError('Failed to parse the X.509 certificate', { cause });\n    }\n    return fromSPKI(spki, alg, options);\n};\n","import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { decode as base64url } from './base64url.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'oct': {\n            switch (jwk.alg) {\n                case 'HS256':\n                case 'HS384':\n                case 'HS512':\n                    algorithm = { name: 'HMAC', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = ['sign', 'verify'];\n                    break;\n                case 'A128CBC-HS256':\n                case 'A192CBC-HS384':\n                case 'A256CBC-HS512':\n                    throw new JOSENotSupported(`${jwk.alg} keys cannot be imported as CryptoKey instances`);\n                case 'A128GCM':\n                case 'A192GCM':\n                case 'A256GCM':\n                case 'A128GCMKW':\n                case 'A192GCMKW':\n                case 'A256GCMKW':\n                    algorithm = { name: 'AES-GCM' };\n                    keyUsages = ['encrypt', 'decrypt'];\n                    break;\n                case 'A128KW':\n                case 'A192KW':\n                case 'A256KW':\n                    algorithm = { name: 'AES-KW' };\n                    keyUsages = ['wrapKey', 'unwrapKey'];\n                    break;\n                case 'PBES2-HS256+A128KW':\n                case 'PBES2-HS384+A192KW':\n                case 'PBES2-HS512+A256KW':\n                    algorithm = { name: 'PBKDF2' };\n                    keyUsages = ['deriveBits'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'EdDSA':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nconst parse = async (jwk) => {\n    var _a, _b;\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const rest = [\n        algorithm,\n        (_a = jwk.ext) !== null && _a !== void 0 ? _a : false,\n        (_b = jwk.key_ops) !== null && _b !== void 0 ? _b : keyUsages,\n    ];\n    if (algorithm.name === 'PBKDF2') {\n        return crypto.subtle.importKey('raw', base64url(jwk.k), ...rest);\n    }\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, ...rest);\n};\nexport default parse;\n","import { decode as decodeBase64URL } from '../runtime/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../runtime/asn1.js';\nimport asKeyObject from '../runtime/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg, octAsKeyObject) {\n    var _a;\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    alg || (alg = jwk.alg);\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            octAsKeyObject !== null && octAsKeyObject !== void 0 ? octAsKeyObject : (octAsKeyObject = jwk.ext !== true);\n            if (octAsKeyObject) {\n                return asKeyObject({ ...jwk, alg, ext: (_a = jwk.ext) !== null && _a !== void 0 ? _a : false });\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if (jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return asKeyObject({ ...jwk, alg });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n","import { concat, uint64be } from '../lib/buffer_utils.js';\nimport checkIvLength from '../lib/check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkEncCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { types } from './is_key_like.js';\nasync function cbcEncrypt(enc, plaintext, cek, iv, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['encrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const ciphertext = new Uint8Array(await crypto.subtle.encrypt({\n        iv,\n        name: 'AES-CBC',\n    }, encKey, plaintext));\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const tag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    return { ciphertext, tag };\n}\nasync function gcmEncrypt(enc, plaintext, cek, iv, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['encrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'encrypt');\n        encKey = cek;\n    }\n    const encrypted = new Uint8Array(await crypto.subtle.encrypt({\n        additionalData: aad,\n        iv,\n        name: 'AES-GCM',\n        tagLength: 128,\n    }, encKey, plaintext));\n    const tag = encrypted.slice(-16);\n    const ciphertext = encrypted.slice(0, -16);\n    return { ciphertext, tag };\n}\nconst encrypt = async (enc, plaintext, cek, iv, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, ...types, 'Uint8Array'));\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcEncrypt(enc, plaintext, cek, iv, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmEncrypt(enc, plaintext, cek, iv, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\nexport default encrypt;\n","import encrypt from '../runtime/encrypt.js';\nimport decrypt from '../runtime/decrypt.js';\nimport generateIv from './iv.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nexport async function wrap(alg, key, cek, iv) {\n    const jweAlgorithm = alg.slice(0, 7);\n    iv || (iv = generateIv(jweAlgorithm));\n    const { ciphertext: encryptedKey, tag } = await encrypt(jweAlgorithm, cek, key, iv, new Uint8Array(0));\n    return { encryptedKey, iv: base64url(iv), tag: base64url(tag) };\n}\nexport async function unwrap(alg, key, encryptedKey, iv, tag) {\n    const jweAlgorithm = alg.slice(0, 7);\n    return decrypt(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));\n}\n","import { unwrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { decrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { decrypt as rsaEs } from '../runtime/rsaes.js';\nimport { decode as base64url } from '../runtime/base64url.js';\nimport { JOSENotSupported, JWEInvalid } from '../util/errors.js';\nimport { bitLength as cekLength } from '../lib/cek.js';\nimport { importJWK } from '../key/import.js';\nimport checkKeyType from './check_key_type.js';\nimport isObject from './is_object.js';\nimport { unwrap as aesGcmKw } from './aesgcmkw.js';\nasync function decryptKeyManagement(alg, key, encryptedKey, joseHeader, options) {\n    checkKeyType(alg, key, 'decrypt');\n    switch (alg) {\n        case 'dir': {\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n            return key;\n        }\n        case 'ECDH-ES':\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!isObject(joseHeader.epk))\n                throw new JWEInvalid(`JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid`);\n            if (!ECDH.ecdhAllowed(key))\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            const epk = await importJWK(joseHeader.epk, alg);\n            let partyUInfo;\n            let partyVInfo;\n            if (joseHeader.apu !== undefined) {\n                if (typeof joseHeader.apu !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apu\" (Agreement PartyUInfo) invalid`);\n                try {\n                    partyUInfo = base64url(joseHeader.apu);\n                }\n                catch (_a) {\n                    throw new JWEInvalid('Failed to base64url decode the apu');\n                }\n            }\n            if (joseHeader.apv !== undefined) {\n                if (typeof joseHeader.apv !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apv\" (Agreement PartyVInfo) invalid`);\n                try {\n                    partyVInfo = base64url(joseHeader.apv);\n                }\n                catch (_b) {\n                    throw new JWEInvalid('Failed to base64url decode the apv');\n                }\n            }\n            const sharedSecret = await ECDH.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? cekLength(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);\n            if (alg === 'ECDH-ES')\n                return sharedSecret;\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg.slice(-6), sharedSecret, encryptedKey);\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return rsaEs(alg, key, encryptedKey);\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.p2c !== 'number')\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) missing or invalid`);\n            const p2cLimit = (options === null || options === void 0 ? void 0 : options.maxPBES2Count) || 10000;\n            if (joseHeader.p2c > p2cLimit)\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds`);\n            if (typeof joseHeader.p2s !== 'string')\n                throw new JWEInvalid(`JOSE Header \"p2s\" (PBES2 Salt) missing or invalid`);\n            let p2s;\n            try {\n                p2s = base64url(joseHeader.p2s);\n            }\n            catch (_c) {\n                throw new JWEInvalid('Failed to base64url decode the p2s');\n            }\n            return pbes2Kw(alg, key, encryptedKey, joseHeader.p2c, p2s);\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aesKw(alg, key, encryptedKey);\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.iv !== 'string')\n                throw new JWEInvalid(`JOSE Header \"iv\" (Initialization Vector) missing or invalid`);\n            if (typeof joseHeader.tag !== 'string')\n                throw new JWEInvalid(`JOSE Header \"tag\" (Authentication Tag) missing or invalid`);\n            let iv;\n            try {\n                iv = base64url(joseHeader.iv);\n            }\n            catch (_d) {\n                throw new JWEInvalid('Failed to base64url decode the iv');\n            }\n            let tag;\n            try {\n                tag = base64url(joseHeader.tag);\n            }\n            catch (_e) {\n                throw new JWEInvalid('Failed to base64url decode the tag');\n            }\n            return aesGcmKw(alg, key, encryptedKey, iv, tag);\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n}\nexport default decryptKeyManagement;\n","import { JOSENotSupported } from '../util/errors.js';\nfunction validateCrit(Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) {\n    if (joseHeader.crit !== undefined && protectedHeader.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        else if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n}\nexport default validateCrit;\n","import { decode as base64url } from '../../runtime/base64url.js';\nimport decrypt from '../../runtime/decrypt.js';\nimport { inflate } from '../../runtime/zlib.js';\nimport { JOSEAlgNotAllowed, JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport decryptKeyManagement from '../../lib/decrypt_key_management.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport generateCek from '../../lib/cek.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nexport async function flattenedDecrypt(jwe, key, options) {\n    var _a;\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('Flattened JWE must be an object');\n    }\n    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {\n        throw new JWEInvalid('JOSE Header missing');\n    }\n    if (typeof jwe.iv !== 'string') {\n        throw new JWEInvalid('JWE Initialization Vector missing or incorrect type');\n    }\n    if (typeof jwe.ciphertext !== 'string') {\n        throw new JWEInvalid('JWE Ciphertext missing or incorrect type');\n    }\n    if (typeof jwe.tag !== 'string') {\n        throw new JWEInvalid('JWE Authentication Tag missing or incorrect type');\n    }\n    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {\n        throw new JWEInvalid('JWE Protected Header incorrect type');\n    }\n    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {\n        throw new JWEInvalid('JWE Encrypted Key incorrect type');\n    }\n    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {\n        throw new JWEInvalid('JWE AAD incorrect type');\n    }\n    if (jwe.header !== undefined && !isObject(jwe.header)) {\n        throw new JWEInvalid('JWE Shared Unprotected Header incorrect type');\n    }\n    if (jwe.unprotected !== undefined && !isObject(jwe.unprotected)) {\n        throw new JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');\n    }\n    let parsedProt;\n    if (jwe.protected) {\n        try {\n            const protectedHeader = base64url(jwe.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch (_b) {\n            throw new JWEInvalid('JWE Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jwe.header, jwe.unprotected)) {\n        throw new JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jwe.header,\n        ...jwe.unprotected,\n    };\n    validateCrit(JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);\n    if (joseHeader.zip !== undefined) {\n        if (!parsedProt || !parsedProt.zip) {\n            throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n        }\n        if (joseHeader.zip !== 'DEF') {\n            throw new JOSENotSupported('Unsupported JWE \"zip\" (Compression Algorithm) Header Parameter value');\n        }\n    }\n    const { alg, enc } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('missing JWE Algorithm (alg) in JWE Header');\n    }\n    if (typeof enc !== 'string' || !enc) {\n        throw new JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');\n    }\n    const keyManagementAlgorithms = options && validateAlgorithms('keyManagementAlgorithms', options.keyManagementAlgorithms);\n    const contentEncryptionAlgorithms = options &&\n        validateAlgorithms('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);\n    if (keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter not allowed');\n    }\n    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {\n        throw new JOSEAlgNotAllowed('\"enc\" (Encryption Algorithm) Header Parameter not allowed');\n    }\n    let encryptedKey;\n    if (jwe.encrypted_key !== undefined) {\n        try {\n            encryptedKey = base64url(jwe.encrypted_key);\n        }\n        catch (_c) {\n            throw new JWEInvalid('Failed to base64url decode the encrypted_key');\n        }\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jwe);\n        resolvedKey = true;\n    }\n    let cek;\n    try {\n        cek = await decryptKeyManagement(alg, key, encryptedKey, joseHeader, options);\n    }\n    catch (err) {\n        if (err instanceof TypeError || err instanceof JWEInvalid || err instanceof JOSENotSupported) {\n            throw err;\n        }\n        cek = generateCek(enc);\n    }\n    let iv;\n    let tag;\n    try {\n        iv = base64url(jwe.iv);\n    }\n    catch (_d) {\n        throw new JWEInvalid('Failed to base64url decode the iv');\n    }\n    try {\n        tag = base64url(jwe.tag);\n    }\n    catch (_e) {\n        throw new JWEInvalid('Failed to base64url decode the tag');\n    }\n    const protectedHeader = encoder.encode((_a = jwe.protected) !== null && _a !== void 0 ? _a : '');\n    let additionalData;\n    if (jwe.aad !== undefined) {\n        additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(jwe.aad));\n    }\n    else {\n        additionalData = protectedHeader;\n    }\n    let ciphertext;\n    try {\n        ciphertext = base64url(jwe.ciphertext);\n    }\n    catch (_f) {\n        throw new JWEInvalid('Failed to base64url decode the ciphertext');\n    }\n    let plaintext = await decrypt(enc, cek, ciphertext, iv, tag, additionalData);\n    if (joseHeader.zip === 'DEF') {\n        plaintext = await ((options === null || options === void 0 ? void 0 : options.inflateRaw) || inflate)(plaintext);\n    }\n    const result = { plaintext };\n    if (jwe.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jwe.aad !== undefined) {\n        try {\n            result.additionalAuthenticatedData = base64url(jwe.aad);\n        }\n        catch (_g) {\n            throw new JWEInvalid('Failed to base64url decode the aad');\n        }\n    }\n    if (jwe.unprotected !== undefined) {\n        result.sharedUnprotectedHeader = jwe.unprotected;\n    }\n    if (jwe.header !== undefined) {\n        result.unprotectedHeader = jwe.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactDecrypt(jwe, key, options) {\n    if (jwe instanceof Uint8Array) {\n        jwe = decoder.decode(jwe);\n    }\n    if (typeof jwe !== 'string') {\n        throw new JWEInvalid('Compact JWE must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');\n    if (length !== 5) {\n        throw new JWEInvalid('Invalid Compact JWE');\n    }\n    const decrypted = await flattenedDecrypt({\n        ciphertext,\n        iv: (iv || undefined),\n        protected: protectedHeader || undefined,\n        tag: (tag || undefined),\n        encrypted_key: encryptedKey || undefined,\n    }, key, options);\n    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEDecryptionFailed, JWEInvalid } from '../../util/errors.js';\nimport isObject from '../../lib/is_object.js';\nexport async function generalDecrypt(jwe, key, options) {\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('General JWE must be an object');\n    }\n    if (!Array.isArray(jwe.recipients) || !jwe.recipients.every(isObject)) {\n        throw new JWEInvalid('JWE Recipients missing or incorrect type');\n    }\n    if (!jwe.recipients.length) {\n        throw new JWEInvalid('JWE Recipients has no members');\n    }\n    for (const recipient of jwe.recipients) {\n        try {\n            return await flattenedDecrypt({\n                aad: jwe.aad,\n                ciphertext: jwe.ciphertext,\n                encrypted_key: recipient.encrypted_key,\n                header: recipient.header,\n                iv: jwe.iv,\n                protected: jwe.protected,\n                tag: jwe.tag,\n                unprotected: jwe.unprotected,\n            }, key, options);\n        }\n        catch (_a) {\n        }\n    }\n    throw new JWEDecryptionFailed();\n}\n","import crypto, { isCryptoKey } from './webcrypto.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { encode as base64url } from './base64url.js';\nimport { types } from './is_key_like.js';\nconst keyToJWK = async (key) => {\n    if (key instanceof Uint8Array) {\n        return {\n            kty: 'oct',\n            k: base64url(key),\n        };\n    }\n    if (!isCryptoKey(key)) {\n        throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n    }\n    if (!key.extractable) {\n        throw new TypeError('non-extractable CryptoKey cannot be exported as a JWK');\n    }\n    const { ext, key_ops, alg, use, ...jwk } = await crypto.subtle.exportKey('jwk', key);\n    return jwk;\n};\nexport default keyToJWK;\n","import { toSPKI as exportPublic } from '../runtime/asn1.js';\nimport { toPKCS8 as exportPrivate } from '../runtime/asn1.js';\nimport keyToJWK from '../runtime/key_to_jwk.js';\nexport async function exportSPKI(key) {\n    return exportPublic(key);\n}\nexport async function exportPKCS8(key) {\n    return exportPrivate(key);\n}\nexport async function exportJWK(key) {\n    return keyToJWK(key);\n}\n","import { wrap as aesKw } from '../runtime/aeskw.js';\nimport * as ECDH from '../runtime/ecdhes.js';\nimport { encrypt as pbes2Kw } from '../runtime/pbes2kw.js';\nimport { encrypt as rsaEs } from '../runtime/rsaes.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport generateCek, { bitLength as cekLength } from '../lib/cek.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport { exportJWK } from '../key/export.js';\nimport checkKeyType from './check_key_type.js';\nimport { wrap as aesGcmKw } from './aesgcmkw.js';\nasync function encryptKeyManagement(alg, enc, key, providedCek, providedParameters = {}) {\n    let encryptedKey;\n    let parameters;\n    let cek;\n    checkKeyType(alg, key, 'encrypt');\n    switch (alg) {\n        case 'dir': {\n            cek = key;\n            break;\n        }\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!ECDH.ecdhAllowed(key)) {\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            }\n            const { apu, apv } = providedParameters;\n            let { epk: ephemeralKey } = providedParameters;\n            ephemeralKey || (ephemeralKey = (await ECDH.generateEpk(key)).privateKey);\n            const { x, y, crv, kty } = await exportJWK(ephemeralKey);\n            const sharedSecret = await ECDH.deriveKey(key, ephemeralKey, alg === 'ECDH-ES' ? enc : alg, alg === 'ECDH-ES' ? cekLength(enc) : parseInt(alg.slice(-5, -2), 10), apu, apv);\n            parameters = { epk: { x, crv, kty } };\n            if (kty === 'EC')\n                parameters.epk.y = y;\n            if (apu)\n                parameters.apu = base64url(apu);\n            if (apv)\n                parameters.apv = base64url(apv);\n            if (alg === 'ECDH-ES') {\n                cek = sharedSecret;\n                break;\n            }\n            cek = providedCek || generateCek(enc);\n            const kwAlg = alg.slice(-6);\n            encryptedKey = await aesKw(kwAlg, sharedSecret, cek);\n            break;\n        }\n        case 'RSA1_5':\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await rsaEs(alg, key, cek);\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            cek = providedCek || generateCek(enc);\n            const { p2c, p2s } = providedParameters;\n            ({ encryptedKey, ...parameters } = await pbes2Kw(alg, key, cek, p2c, p2s));\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            cek = providedCek || generateCek(enc);\n            encryptedKey = await aesKw(alg, key, cek);\n            break;\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            cek = providedCek || generateCek(enc);\n            const { iv } = providedParameters;\n            ({ encryptedKey, ...parameters } = await aesGcmKw(alg, key, cek, iv));\n            break;\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n    return { cek, encryptedKey, parameters };\n}\nexport default encryptKeyManagement;\n","import { encode as base64url } from '../../runtime/base64url.js';\nimport encrypt from '../../runtime/encrypt.js';\nimport { deflate } from '../../runtime/zlib.js';\nimport generateIv from '../../lib/iv.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport const unprotected = Symbol();\nexport class FlattenedEncrypt {\n    constructor(plaintext) {\n        if (!(plaintext instanceof Uint8Array)) {\n            throw new TypeError('plaintext must be an instance of Uint8Array');\n        }\n        this._plaintext = plaintext;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this._sharedUnprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this._sharedUnprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this._aad = aad;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    async encrypt(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader && !this._sharedUnprotectedHeader) {\n            throw new JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, this._sharedUnprotectedHeader)) {\n            throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n            ...this._sharedUnprotectedHeader,\n        };\n        validateCrit(JWEInvalid, new Map(), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);\n        if (joseHeader.zip !== undefined) {\n            if (!this._protectedHeader || !this._protectedHeader.zip) {\n                throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n            }\n            if (joseHeader.zip !== 'DEF') {\n                throw new JOSENotSupported('Unsupported JWE \"zip\" (Compression Algorithm) Header Parameter value');\n            }\n        }\n        const { alg, enc } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        if (typeof enc !== 'string' || !enc) {\n            throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n        }\n        let encryptedKey;\n        if (alg === 'dir') {\n            if (this._cek) {\n                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Encryption');\n            }\n        }\n        else if (alg === 'ECDH-ES') {\n            if (this._cek) {\n                throw new TypeError('setContentEncryptionKey cannot be called when using Direct Key Agreement');\n            }\n        }\n        let cek;\n        {\n            let parameters;\n            ({ cek, encryptedKey, parameters } = await encryptKeyManagement(alg, enc, key, this._cek, this._keyManagementParameters));\n            if (parameters) {\n                if (options && unprotected in options) {\n                    if (!this._unprotectedHeader) {\n                        this.setUnprotectedHeader(parameters);\n                    }\n                    else {\n                        this._unprotectedHeader = { ...this._unprotectedHeader, ...parameters };\n                    }\n                }\n                else {\n                    if (!this._protectedHeader) {\n                        this.setProtectedHeader(parameters);\n                    }\n                    else {\n                        this._protectedHeader = { ...this._protectedHeader, ...parameters };\n                    }\n                }\n            }\n        }\n        this._iv || (this._iv = generateIv(enc));\n        let additionalData;\n        let protectedHeader;\n        let aadMember;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        if (this._aad) {\n            aadMember = base64url(this._aad);\n            additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(aadMember));\n        }\n        else {\n            additionalData = protectedHeader;\n        }\n        let ciphertext;\n        let tag;\n        if (joseHeader.zip === 'DEF') {\n            const deflated = await ((options === null || options === void 0 ? void 0 : options.deflateRaw) || deflate)(this._plaintext);\n            ({ ciphertext, tag } = await encrypt(enc, deflated, cek, this._iv, additionalData));\n        }\n        else {\n            ;\n            ({ ciphertext, tag } = await encrypt(enc, this._plaintext, cek, this._iv, additionalData));\n        }\n        const jwe = {\n            ciphertext: base64url(ciphertext),\n            iv: base64url(this._iv),\n            tag: base64url(tag),\n        };\n        if (encryptedKey) {\n            jwe.encrypted_key = base64url(encryptedKey);\n        }\n        if (aadMember) {\n            jwe.aad = aadMember;\n        }\n        if (this._protectedHeader) {\n            jwe.protected = decoder.decode(protectedHeader);\n        }\n        if (this._sharedUnprotectedHeader) {\n            jwe.unprotected = this._sharedUnprotectedHeader;\n        }\n        if (this._unprotectedHeader) {\n            jwe.header = this._unprotectedHeader;\n        }\n        return jwe;\n    }\n}\n","import { FlattenedEncrypt, unprotected } from '../flattened/encrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport generateCek from '../../lib/cek.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport encryptKeyManagement from '../../lib/encrypt_key_management.js';\nimport { encode as base64url } from '../../runtime/base64url.js';\nimport validateCrit from '../../lib/validate_crit.js';\nclass IndividualRecipient {\n    constructor(enc, key, options) {\n        this.parent = enc;\n        this.key = key;\n        this.options = options;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this.unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this.unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    addRecipient(...args) {\n        return this.parent.addRecipient(...args);\n    }\n    encrypt(...args) {\n        return this.parent.encrypt(...args);\n    }\n    done() {\n        return this.parent;\n    }\n}\nexport class GeneralEncrypt {\n    constructor(plaintext) {\n        this._recipients = [];\n        this._plaintext = plaintext;\n    }\n    addRecipient(key, options) {\n        const recipient = new IndividualRecipient(this, key, { crit: options === null || options === void 0 ? void 0 : options.crit });\n        this._recipients.push(recipient);\n        return recipient;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setSharedUnprotectedHeader(sharedUnprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setSharedUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = sharedUnprotectedHeader;\n        return this;\n    }\n    setAdditionalAuthenticatedData(aad) {\n        this._aad = aad;\n        return this;\n    }\n    async encrypt(options) {\n        var _a, _b, _c;\n        if (!this._recipients.length) {\n            throw new JWEInvalid('at least one recipient must be added');\n        }\n        options = { deflateRaw: options === null || options === void 0 ? void 0 : options.deflateRaw };\n        if (this._recipients.length === 1) {\n            const [recipient] = this._recipients;\n            const flattened = await new FlattenedEncrypt(this._plaintext)\n                .setAdditionalAuthenticatedData(this._aad)\n                .setProtectedHeader(this._protectedHeader)\n                .setSharedUnprotectedHeader(this._unprotectedHeader)\n                .setUnprotectedHeader(recipient.unprotectedHeader)\n                .encrypt(recipient.key, { ...recipient.options, ...options });\n            let jwe = {\n                ciphertext: flattened.ciphertext,\n                iv: flattened.iv,\n                recipients: [{}],\n                tag: flattened.tag,\n            };\n            if (flattened.aad)\n                jwe.aad = flattened.aad;\n            if (flattened.protected)\n                jwe.protected = flattened.protected;\n            if (flattened.unprotected)\n                jwe.unprotected = flattened.unprotected;\n            if (flattened.encrypted_key)\n                jwe.recipients[0].encrypted_key = flattened.encrypted_key;\n            if (flattened.header)\n                jwe.recipients[0].header = flattened.header;\n            return jwe;\n        }\n        let enc;\n        for (let i = 0; i < this._recipients.length; i++) {\n            const recipient = this._recipients[i];\n            if (!isDisjoint(this._protectedHeader, this._unprotectedHeader, recipient.unprotectedHeader)) {\n                throw new JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');\n            }\n            const joseHeader = {\n                ...this._protectedHeader,\n                ...this._unprotectedHeader,\n                ...recipient.unprotectedHeader,\n            };\n            const { alg } = joseHeader;\n            if (typeof alg !== 'string' || !alg) {\n                throw new JWEInvalid('JWE \"alg\" (Algorithm) Header Parameter missing or invalid');\n            }\n            if (alg === 'dir' || alg === 'ECDH-ES') {\n                throw new JWEInvalid('\"dir\" and \"ECDH-ES\" alg may only be used with a single recipient');\n            }\n            if (typeof joseHeader.enc !== 'string' || !joseHeader.enc) {\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter missing or invalid');\n            }\n            if (!enc) {\n                enc = joseHeader.enc;\n            }\n            else if (enc !== joseHeader.enc) {\n                throw new JWEInvalid('JWE \"enc\" (Encryption Algorithm) Header Parameter must be the same for all recipients');\n            }\n            validateCrit(JWEInvalid, new Map(), recipient.options.crit, this._protectedHeader, joseHeader);\n            if (joseHeader.zip !== undefined) {\n                if (!this._protectedHeader || !this._protectedHeader.zip) {\n                    throw new JWEInvalid('JWE \"zip\" (Compression Algorithm) Header MUST be integrity protected');\n                }\n            }\n        }\n        const cek = generateCek(enc);\n        let jwe = {\n            ciphertext: '',\n            iv: '',\n            recipients: [],\n            tag: '',\n        };\n        for (let i = 0; i < this._recipients.length; i++) {\n            const recipient = this._recipients[i];\n            const target = {};\n            jwe.recipients.push(target);\n            const joseHeader = {\n                ...this._protectedHeader,\n                ...this._unprotectedHeader,\n                ...recipient.unprotectedHeader,\n            };\n            const p2c = joseHeader.alg.startsWith('PBES2') ? 2048 + i : undefined;\n            if (i === 0) {\n                const flattened = await new FlattenedEncrypt(this._plaintext)\n                    .setAdditionalAuthenticatedData(this._aad)\n                    .setContentEncryptionKey(cek)\n                    .setProtectedHeader(this._protectedHeader)\n                    .setSharedUnprotectedHeader(this._unprotectedHeader)\n                    .setUnprotectedHeader(recipient.unprotectedHeader)\n                    .setKeyManagementParameters({ p2c })\n                    .encrypt(recipient.key, {\n                    ...recipient.options,\n                    ...options,\n                    [unprotected]: true,\n                });\n                jwe.ciphertext = flattened.ciphertext;\n                jwe.iv = flattened.iv;\n                jwe.tag = flattened.tag;\n                if (flattened.aad)\n                    jwe.aad = flattened.aad;\n                if (flattened.protected)\n                    jwe.protected = flattened.protected;\n                if (flattened.unprotected)\n                    jwe.unprotected = flattened.unprotected;\n                target.encrypted_key = flattened.encrypted_key;\n                if (flattened.header)\n                    target.header = flattened.header;\n                continue;\n            }\n            const { encryptedKey, parameters } = await encryptKeyManagement(((_a = recipient.unprotectedHeader) === null || _a === void 0 ? void 0 : _a.alg) ||\n                ((_b = this._protectedHeader) === null || _b === void 0 ? void 0 : _b.alg) ||\n                ((_c = this._unprotectedHeader) === null || _c === void 0 ? void 0 : _c.alg), enc, recipient.key, cek, { p2c });\n            target.encrypted_key = base64url(encryptedKey);\n            if (recipient.unprotectedHeader || parameters)\n                target.header = { ...recipient.unprotectedHeader, ...parameters };\n        }\n        return jwe;\n    }\n}\n","import { JOSENotSupported } from '../util/errors.js';\nexport default function subtleDsa(alg, algorithm) {\n    const hash = `SHA-${alg.slice(-3)}`;\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512':\n            return { hash, name: 'HMAC' };\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            return { hash, name: 'RSA-PSS', saltLength: alg.slice(-3) >> 3 };\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            return { hash, name: 'RSASSA-PKCS1-v1_5' };\n        case 'ES256':\n        case 'ES384':\n        case 'ES512':\n            return { hash, name: 'ECDSA', namedCurve: algorithm.namedCurve };\n        case 'EdDSA':\n            return { name: algorithm.name };\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n}\n","import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getVerifyKey from './get_sign_verify_key.js';\nconst verify = async (alg, key, signature, data) => {\n    const cryptoKey = await getVerifyKey(alg, key, 'verify');\n    checkKeyLength(alg, cryptoKey);\n    const algorithm = subtleAlgorithm(alg, cryptoKey.algorithm);\n    try {\n        return await crypto.subtle.verify(algorithm, cryptoKey, signature, data);\n    }\n    catch (_a) {\n        return false;\n    }\n};\nexport default verify;\n","import { decode as base64url } from '../../runtime/base64url.js';\nimport verify from '../../runtime/verify.js';\nimport { JOSEAlgNotAllowed, JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\nimport { concat, encoder, decoder } from '../../lib/buffer_utils.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nexport async function flattenedVerify(jws, key, options) {\n    var _a;\n    if (!isObject(jws)) {\n        throw new JWSInvalid('Flattened JWS must be an object');\n    }\n    if (jws.protected === undefined && jws.header === undefined) {\n        throw new JWSInvalid('Flattened JWS must have either of the \"protected\" or \"header\" members');\n    }\n    if (jws.protected !== undefined && typeof jws.protected !== 'string') {\n        throw new JWSInvalid('JWS Protected Header incorrect type');\n    }\n    if (jws.payload === undefined) {\n        throw new JWSInvalid('JWS Payload missing');\n    }\n    if (typeof jws.signature !== 'string') {\n        throw new JWSInvalid('JWS Signature missing or incorrect type');\n    }\n    if (jws.header !== undefined && !isObject(jws.header)) {\n        throw new JWSInvalid('JWS Unprotected Header incorrect type');\n    }\n    let parsedProt = {};\n    if (jws.protected) {\n        try {\n            const protectedHeader = base64url(jws.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch (_b) {\n            throw new JWSInvalid('JWS Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jws.header)) {\n        throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jws.header,\n    };\n    const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, parsedProt, joseHeader);\n    let b64 = true;\n    if (extensions.has('b64')) {\n        b64 = parsedProt.b64;\n        if (typeof b64 !== 'boolean') {\n            throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n        }\n    }\n    const { alg } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n    }\n    const algorithms = options && validateAlgorithms('algorithms', options.algorithms);\n    if (algorithms && !algorithms.has(alg)) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter not allowed');\n    }\n    if (b64) {\n        if (typeof jws.payload !== 'string') {\n            throw new JWSInvalid('JWS Payload must be a string');\n        }\n    }\n    else if (typeof jws.payload !== 'string' && !(jws.payload instanceof Uint8Array)) {\n        throw new JWSInvalid('JWS Payload must be a string or an Uint8Array instance');\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jws);\n        resolvedKey = true;\n    }\n    checkKeyType(alg, key, 'verify');\n    const data = concat(encoder.encode((_a = jws.protected) !== null && _a !== void 0 ? _a : ''), encoder.encode('.'), typeof jws.payload === 'string' ? encoder.encode(jws.payload) : jws.payload);\n    let signature;\n    try {\n        signature = base64url(jws.signature);\n    }\n    catch (_c) {\n        throw new JWSInvalid('Failed to base64url decode the signature');\n    }\n    const verified = await verify(alg, key, signature, data);\n    if (!verified) {\n        throw new JWSSignatureVerificationFailed();\n    }\n    let payload;\n    if (b64) {\n        try {\n            payload = base64url(jws.payload);\n        }\n        catch (_d) {\n            throw new JWSInvalid('Failed to base64url decode the payload');\n        }\n    }\n    else if (typeof jws.payload === 'string') {\n        payload = encoder.encode(jws.payload);\n    }\n    else {\n        payload = jws.payload;\n    }\n    const result = { payload };\n    if (jws.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jws.header !== undefined) {\n        result.unprotectedHeader = jws.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key };\n    }\n    return result;\n}\n","import { flattenedVerify } from '../flattened/verify.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactVerify(jws, key, options) {\n    if (jws instanceof Uint8Array) {\n        jws = decoder.decode(jws);\n    }\n    if (typeof jws !== 'string') {\n        throw new JWSInvalid('Compact JWS must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: payload, 2: signature, length } = jws.split('.');\n    if (length !== 3) {\n        throw new JWSInvalid('Invalid Compact JWS');\n    }\n    const verified = await flattenedVerify({ payload, protected: protectedHeader, signature }, key, options);\n    const result = { payload: verified.payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n","import { flattenedVerify } from '../flattened/verify.js';\nimport { JWSInvalid, JWSSignatureVerificationFailed } from '../../util/errors.js';\nimport isObject from '../../lib/is_object.js';\nexport async function generalVerify(jws, key, options) {\n    if (!isObject(jws)) {\n        throw new JWSInvalid('General JWS must be an object');\n    }\n    if (!Array.isArray(jws.signatures) || !jws.signatures.every(isObject)) {\n        throw new JWSInvalid('JWS Signatures missing or incorrect type');\n    }\n    for (const signature of jws.signatures) {\n        try {\n            return await flattenedVerify({\n                header: signature.header,\n                payload: jws.payload,\n                protected: signature.protected,\n                signature: signature.signature,\n            }, key, options);\n        }\n        catch (_a) {\n        }\n    }\n    throw new JWSSignatureVerificationFailed();\n}\n","const minute = 60;\nconst hour = minute * 60;\nconst day = hour * 24;\nconst week = day * 7;\nconst year = day * 365.25;\nconst REGEX = /^(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;\nexport default (str) => {\n    const matched = REGEX.exec(str);\n    if (!matched) {\n        throw new TypeError('Invalid time period format');\n    }\n    const value = parseFloat(matched[1]);\n    const unit = matched[2].toLowerCase();\n    switch (unit) {\n        case 'sec':\n        case 'secs':\n        case 'second':\n        case 'seconds':\n        case 's':\n            return Math.round(value);\n        case 'minute':\n        case 'minutes':\n        case 'min':\n        case 'mins':\n        case 'm':\n            return Math.round(value * minute);\n        case 'hour':\n        case 'hours':\n        case 'hr':\n        case 'hrs':\n        case 'h':\n            return Math.round(value * hour);\n        case 'day':\n        case 'days':\n        case 'd':\n            return Math.round(value * day);\n        case 'week':\n        case 'weeks':\n        case 'w':\n            return Math.round(value * week);\n        default:\n            return Math.round(value * year);\n    }\n};\n","import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\nimport { decoder } from './buffer_utils.js';\nimport epoch from './epoch.js';\nimport secs from './secs.js';\nimport isObject from './is_object.js';\nconst normalizeTyp = (value) => value.toLowerCase().replace(/^application\\//, '');\nconst checkAudiencePresence = (audPayload, audOption) => {\n    if (typeof audPayload === 'string') {\n        return audOption.includes(audPayload);\n    }\n    if (Array.isArray(audPayload)) {\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\n    }\n    return false;\n};\nexport default (protectedHeader, encodedPayload, options = {}) => {\n    const { typ } = options;\n    if (typ &&\n        (typeof protectedHeader.typ !== 'string' ||\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', 'typ', 'check_failed');\n    }\n    let payload;\n    try {\n        payload = JSON.parse(decoder.decode(encodedPayload));\n    }\n    catch (_a) {\n    }\n    if (!isObject(payload)) {\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\n    }\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\n    if (maxTokenAge !== undefined)\n        requiredClaims.push('iat');\n    if (audience !== undefined)\n        requiredClaims.push('aud');\n    if (subject !== undefined)\n        requiredClaims.push('sub');\n    if (issuer !== undefined)\n        requiredClaims.push('iss');\n    for (const claim of new Set(requiredClaims.reverse())) {\n        if (!(claim in payload)) {\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, claim, 'missing');\n        }\n    }\n    if (issuer && !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', 'iss', 'check_failed');\n    }\n    if (subject && payload.sub !== subject) {\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', 'sub', 'check_failed');\n    }\n    if (audience &&\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', 'aud', 'check_failed');\n    }\n    let tolerance;\n    switch (typeof options.clockTolerance) {\n        case 'string':\n            tolerance = secs(options.clockTolerance);\n            break;\n        case 'number':\n            tolerance = options.clockTolerance;\n            break;\n        case 'undefined':\n            tolerance = 0;\n            break;\n        default:\n            throw new TypeError('Invalid clockTolerance option type');\n    }\n    const { currentDate } = options;\n    const now = epoch(currentDate || new Date());\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', 'iat', 'invalid');\n    }\n    if (payload.nbf !== undefined) {\n        if (typeof payload.nbf !== 'number') {\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', 'nbf', 'invalid');\n        }\n        if (payload.nbf > now + tolerance) {\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', 'nbf', 'check_failed');\n        }\n    }\n    if (payload.exp !== undefined) {\n        if (typeof payload.exp !== 'number') {\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', 'exp', 'invalid');\n        }\n        if (payload.exp <= now - tolerance) {\n            throw new JWTExpired('\"exp\" claim timestamp check failed', 'exp', 'check_failed');\n        }\n    }\n    if (maxTokenAge) {\n        const age = now - payload.iat;\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\n        if (age - tolerance > max) {\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', 'iat', 'check_failed');\n        }\n        if (age < 0 - tolerance) {\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', 'iat', 'check_failed');\n        }\n    }\n    return payload;\n};\n","import { compactVerify } from '../jws/compact/verify.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTInvalid } from '../util/errors.js';\nexport async function jwtVerify(jwt, key, options) {\n    var _a;\n    const verified = await compactVerify(jwt, key, options);\n    if (((_a = verified.protectedHeader.crit) === null || _a === void 0 ? void 0 : _a.includes('b64')) && verified.protectedHeader.b64 === false) {\n        throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n    }\n    const payload = jwtPayload(verified.protectedHeader, verified.payload, options);\n    const result = { payload, protectedHeader: verified.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: verified.key };\n    }\n    return result;\n}\n","import { compactDecrypt } from '../jwe/compact/decrypt.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { JWTClaimValidationFailed } from '../util/errors.js';\nexport async function jwtDecrypt(jwt, key, options) {\n    const decrypted = await compactDecrypt(jwt, key, options);\n    const payload = jwtPayload(decrypted.protectedHeader, decrypted.plaintext, options);\n    const { protectedHeader } = decrypted;\n    if (protectedHeader.iss !== undefined && protectedHeader.iss !== payload.iss) {\n        throw new JWTClaimValidationFailed('replicated \"iss\" claim header parameter mismatch', 'iss', 'mismatch');\n    }\n    if (protectedHeader.sub !== undefined && protectedHeader.sub !== payload.sub) {\n        throw new JWTClaimValidationFailed('replicated \"sub\" claim header parameter mismatch', 'sub', 'mismatch');\n    }\n    if (protectedHeader.aud !== undefined &&\n        JSON.stringify(protectedHeader.aud) !== JSON.stringify(payload.aud)) {\n        throw new JWTClaimValidationFailed('replicated \"aud\" claim header parameter mismatch', 'aud', 'mismatch');\n    }\n    const result = { payload, protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","import { FlattenedEncrypt } from '../flattened/encrypt.js';\nexport class CompactEncrypt {\n    constructor(plaintext) {\n        this._flattened = new FlattenedEncrypt(plaintext);\n    }\n    setContentEncryptionKey(cek) {\n        this._flattened.setContentEncryptionKey(cek);\n        return this;\n    }\n    setInitializationVector(iv) {\n        this._flattened.setInitializationVector(iv);\n        return this;\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        this._flattened.setKeyManagementParameters(parameters);\n        return this;\n    }\n    async encrypt(key, options) {\n        const jwe = await this._flattened.encrypt(key, options);\n        return [jwe.protected, jwe.encrypted_key, jwe.iv, jwe.ciphertext, jwe.tag].join('.');\n    }\n}\n","export default (alg, key) => {\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\n        const { modulusLength } = key.algorithm;\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\n        }\n    }\n};\n","function unusable(name, prop = 'algorithm.name') {\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\n}\nfunction isAlgorithm(algorithm, name) {\n    return algorithm.name === name;\n}\nfunction getHashLength(hash) {\n    return parseInt(hash.name.slice(4), 10);\n}\nfunction getNamedCurve(alg) {\n    switch (alg) {\n        case 'ES256':\n            return 'P-256';\n        case 'ES384':\n            return 'P-384';\n        case 'ES512':\n            return 'P-521';\n        default:\n            throw new Error('unreachable');\n    }\n}\nfunction checkUsage(key, usages) {\n    if (usages.length && !usages.some((expected) => key.usages.includes(expected))) {\n        let msg = 'CryptoKey does not support this operation, its usages must include ';\n        if (usages.length > 2) {\n            const last = usages.pop();\n            msg += `one of ${usages.join(', ')}, or ${last}.`;\n        }\n        else if (usages.length === 2) {\n            msg += `one of ${usages[0]} or ${usages[1]}.`;\n        }\n        else {\n            msg += `${usages[0]}.`;\n        }\n        throw new TypeError(msg);\n    }\n}\nexport function checkSigCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512': {\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\n                throw unusable('HMAC');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'RS256':\n        case 'RS384':\n        case 'RS512': {\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\n                throw unusable('RSASSA-PKCS1-v1_5');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'PS256':\n        case 'PS384':\n        case 'PS512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\n                throw unusable('RSA-PSS');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'EdDSA': {\n            if (key.algorithm.name !== 'Ed25519' && key.algorithm.name !== 'Ed448') {\n                throw unusable('Ed25519 or Ed448');\n            }\n            break;\n        }\n        case 'ES256':\n        case 'ES384':\n        case 'ES512': {\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\n                throw unusable('ECDSA');\n            const expected = getNamedCurve(alg);\n            const actual = key.algorithm.namedCurve;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.namedCurve');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\nexport function checkEncCryptoKey(key, alg, ...usages) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM': {\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\n                throw unusable('AES-GCM');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\n                throw unusable('AES-KW');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'ECDH': {\n            switch (key.algorithm.name) {\n                case 'ECDH':\n                case 'X25519':\n                case 'X448':\n                    break;\n                default:\n                    throw unusable('ECDH, X25519, or X448');\n            }\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW':\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\n                throw unusable('PBKDF2');\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\n                throw unusable('RSA-OAEP');\n            const expected = parseInt(alg.slice(9), 10) || 1;\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usages);\n}\n","function message(msg, actual, ...types) {\n    if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\n    }\n    else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}.`;\n    }\n    else {\n        msg += `of type ${types[0]}.`;\n    }\n    if (actual == null) {\n        msg += ` Received ${actual}`;\n    }\n    else if (typeof actual === 'function' && actual.name) {\n        msg += ` Received function ${actual.name}`;\n    }\n    else if (typeof actual === 'object' && actual != null) {\n        if (actual.constructor && actual.constructor.name) {\n            msg += ` Received an instance of ${actual.constructor.name}`;\n        }\n    }\n    return msg;\n}\nexport default (actual, ...types) => {\n    return message('Key must be ', actual, ...types);\n};\nexport function withAlg(alg, actual, ...types) {\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\n}\n","import { isCryptoKey } from './webcrypto.js';\nexport default (key) => {\n    return isCryptoKey(key);\n};\nexport const types = ['CryptoKey'];\n","import crypto, { isCryptoKey } from './webcrypto.js';\nimport { checkSigCryptoKey } from '../lib/crypto_key.js';\nimport invalidKeyInput from '../lib/invalid_key_input.js';\nimport { types } from './is_key_like.js';\nexport default function getCryptoKey(alg, key, usage) {\n    if (isCryptoKey(key)) {\n        checkSigCryptoKey(key, alg, usage);\n        return key;\n    }\n    if (key instanceof Uint8Array) {\n        if (!alg.startsWith('HS')) {\n            throw new TypeError(invalidKeyInput(key, ...types));\n        }\n        return crypto.subtle.importKey('raw', key, { hash: `SHA-${alg.slice(-3)}`, name: 'HMAC' }, false, [usage]);\n    }\n    throw new TypeError(invalidKeyInput(key, ...types, 'Uint8Array'));\n}\n","import subtleAlgorithm from './subtle_dsa.js';\nimport crypto from './webcrypto.js';\nimport checkKeyLength from './check_key_length.js';\nimport getSignKey from './get_sign_verify_key.js';\nconst sign = async (alg, key, data) => {\n    const cryptoKey = await getSignKey(alg, key, 'sign');\n    checkKeyLength(alg, cryptoKey);\n    const signature = await crypto.subtle.sign(subtleAlgorithm(alg, cryptoKey.algorithm), cryptoKey, data);\n    return new Uint8Array(signature);\n};\nexport default sign;\n","const isDisjoint = (...headers) => {\n    const sources = headers.filter(Boolean);\n    if (sources.length === 0 || sources.length === 1) {\n        return true;\n    }\n    let acc;\n    for (const header of sources) {\n        const parameters = Object.keys(header);\n        if (!acc || acc.size === 0) {\n            acc = new Set(parameters);\n            continue;\n        }\n        for (const parameter of parameters) {\n            if (acc.has(parameter)) {\n                return false;\n            }\n            acc.add(parameter);\n        }\n    }\n    return true;\n};\nexport default isDisjoint;\n","import { withAlg as invalidKeyInput } from './invalid_key_input.js';\nimport isKeyLike, { types } from '../runtime/is_key_like.js';\nconst symmetricTypeCheck = (alg, key) => {\n    if (key instanceof Uint8Array)\n        return;\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types, 'Uint8Array'));\n    }\n    if (key.type !== 'secret') {\n        throw new TypeError(`${types.join(' or ')} instances for symmetric algorithms must be of type \"secret\"`);\n    }\n};\nconst asymmetricTypeCheck = (alg, key, usage) => {\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, ...types));\n    }\n    if (key.type === 'secret') {\n        throw new TypeError(`${types.join(' or ')} instances for asymmetric algorithms must not be of type \"secret\"`);\n    }\n    if (usage === 'sign' && key.type === 'public') {\n        throw new TypeError(`${types.join(' or ')} instances for asymmetric algorithm signing must be of type \"private\"`);\n    }\n    if (usage === 'decrypt' && key.type === 'public') {\n        throw new TypeError(`${types.join(' or ')} instances for asymmetric algorithm decryption must be of type \"private\"`);\n    }\n    if (key.algorithm && usage === 'verify' && key.type === 'private') {\n        throw new TypeError(`${types.join(' or ')} instances for asymmetric algorithm verifying must be of type \"public\"`);\n    }\n    if (key.algorithm && usage === 'encrypt' && key.type === 'private') {\n        throw new TypeError(`${types.join(' or ')} instances for asymmetric algorithm encryption must be of type \"public\"`);\n    }\n};\nconst checkKeyType = (alg, key, usage) => {\n    const symmetric = alg.startsWith('HS') ||\n        alg === 'dir' ||\n        alg.startsWith('PBES2') ||\n        /^A\\d{3}(?:GCM)?KW$/.test(alg);\n    if (symmetric) {\n        symmetricTypeCheck(alg, key);\n    }\n    else {\n        asymmetricTypeCheck(alg, key, usage);\n    }\n};\nexport default checkKeyType;\n","import { encode as base64url } from '../../runtime/base64url.js';\nimport sign from '../../runtime/sign.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport { JWSInvalid } from '../../util/errors.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nimport validateCrit from '../../lib/validate_crit.js';\nexport class FlattenedSign {\n    constructor(payload) {\n        if (!(payload instanceof Uint8Array)) {\n            throw new TypeError('payload must be an instance of Uint8Array');\n        }\n        this._payload = payload;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this._unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this._unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        if (!this._protectedHeader && !this._unprotectedHeader) {\n            throw new JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');\n        }\n        if (!isDisjoint(this._protectedHeader, this._unprotectedHeader)) {\n            throw new JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');\n        }\n        const joseHeader = {\n            ...this._protectedHeader,\n            ...this._unprotectedHeader,\n        };\n        const extensions = validateCrit(JWSInvalid, new Map([['b64', true]]), options === null || options === void 0 ? void 0 : options.crit, this._protectedHeader, joseHeader);\n        let b64 = true;\n        if (extensions.has('b64')) {\n            b64 = this._protectedHeader.b64;\n            if (typeof b64 !== 'boolean') {\n                throw new JWSInvalid('The \"b64\" (base64url-encode payload) Header Parameter must be a boolean');\n            }\n        }\n        const { alg } = joseHeader;\n        if (typeof alg !== 'string' || !alg) {\n            throw new JWSInvalid('JWS \"alg\" (Algorithm) Header Parameter missing or invalid');\n        }\n        checkKeyType(alg, key, 'sign');\n        let payload = this._payload;\n        if (b64) {\n            payload = encoder.encode(base64url(payload));\n        }\n        let protectedHeader;\n        if (this._protectedHeader) {\n            protectedHeader = encoder.encode(base64url(JSON.stringify(this._protectedHeader)));\n        }\n        else {\n            protectedHeader = encoder.encode('');\n        }\n        const data = concat(protectedHeader, encoder.encode('.'), payload);\n        const signature = await sign(alg, key, data);\n        const jws = {\n            signature: base64url(signature),\n            payload: '',\n        };\n        if (b64) {\n            jws.payload = decoder.decode(payload);\n        }\n        if (this._unprotectedHeader) {\n            jws.header = this._unprotectedHeader;\n        }\n        if (this._protectedHeader) {\n            jws.protected = decoder.decode(protectedHeader);\n        }\n        return jws;\n    }\n}\n","import { FlattenedSign } from '../flattened/sign.js';\nexport class CompactSign {\n    constructor(payload) {\n        this._flattened = new FlattenedSign(payload);\n    }\n    setProtectedHeader(protectedHeader) {\n        this._flattened.setProtectedHeader(protectedHeader);\n        return this;\n    }\n    async sign(key, options) {\n        const jws = await this._flattened.sign(key, options);\n        if (jws.payload === undefined) {\n            throw new TypeError('use the flattened module for creating JWS with b64: false');\n        }\n        return `${jws.protected}.${jws.payload}.${jws.signature}`;\n    }\n}\n","import { FlattenedSign } from '../flattened/sign.js';\nimport { JWSInvalid } from '../../util/errors.js';\nclass IndividualSignature {\n    constructor(sig, key, options) {\n        this.parent = sig;\n        this.key = key;\n        this.options = options;\n    }\n    setProtectedHeader(protectedHeader) {\n        if (this.protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this.protectedHeader = protectedHeader;\n        return this;\n    }\n    setUnprotectedHeader(unprotectedHeader) {\n        if (this.unprotectedHeader) {\n            throw new TypeError('setUnprotectedHeader can only be called once');\n        }\n        this.unprotectedHeader = unprotectedHeader;\n        return this;\n    }\n    addSignature(...args) {\n        return this.parent.addSignature(...args);\n    }\n    sign(...args) {\n        return this.parent.sign(...args);\n    }\n    done() {\n        return this.parent;\n    }\n}\nexport class GeneralSign {\n    constructor(payload) {\n        this._signatures = [];\n        this._payload = payload;\n    }\n    addSignature(key, options) {\n        const signature = new IndividualSignature(this, key, options);\n        this._signatures.push(signature);\n        return signature;\n    }\n    async sign() {\n        if (!this._signatures.length) {\n            throw new JWSInvalid('at least one signature must be added');\n        }\n        const jws = {\n            signatures: [],\n            payload: '',\n        };\n        for (let i = 0; i < this._signatures.length; i++) {\n            const signature = this._signatures[i];\n            const flattened = new FlattenedSign(this._payload);\n            flattened.setProtectedHeader(signature.protectedHeader);\n            flattened.setUnprotectedHeader(signature.unprotectedHeader);\n            const { payload, ...rest } = await flattened.sign(signature.key, signature.options);\n            if (i === 0) {\n                jws.payload = payload;\n            }\n            else if (jws.payload !== payload) {\n                throw new JWSInvalid('inconsistent use of JWS Unencoded Payload (RFC7797)');\n            }\n            jws.signatures.push(rest);\n        }\n        return jws;\n    }\n}\n","export default (date) => Math.floor(date.getTime() / 1000);\n","function isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport default function isObject(input) {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n}\n","import epoch from '../lib/epoch.js';\nimport isObject from '../lib/is_object.js';\nimport secs from '../lib/secs.js';\nexport class ProduceJWT {\n    constructor(payload) {\n        if (!isObject(payload)) {\n            throw new TypeError('JWT Claims Set MUST be an object');\n        }\n        this._payload = payload;\n    }\n    setIssuer(issuer) {\n        this._payload = { ...this._payload, iss: issuer };\n        return this;\n    }\n    setSubject(subject) {\n        this._payload = { ...this._payload, sub: subject };\n        return this;\n    }\n    setAudience(audience) {\n        this._payload = { ...this._payload, aud: audience };\n        return this;\n    }\n    setJti(jwtId) {\n        this._payload = { ...this._payload, jti: jwtId };\n        return this;\n    }\n    setNotBefore(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, nbf: input };\n        }\n        else {\n            this._payload = { ...this._payload, nbf: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setExpirationTime(input) {\n        if (typeof input === 'number') {\n            this._payload = { ...this._payload, exp: input };\n        }\n        else {\n            this._payload = { ...this._payload, exp: epoch(new Date()) + secs(input) };\n        }\n        return this;\n    }\n    setIssuedAt(input) {\n        if (typeof input === 'undefined') {\n            this._payload = { ...this._payload, iat: epoch(new Date()) };\n        }\n        else {\n            this._payload = { ...this._payload, iat: input };\n        }\n        return this;\n    }\n}\n","import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        var _a;\n        const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n        sig.setProtectedHeader(this._protectedHeader);\n        if (Array.isArray((_a = this._protectedHeader) === null || _a === void 0 ? void 0 : _a.crit) &&\n            this._protectedHeader.crit.includes('b64') &&\n            this._protectedHeader.b64 === false) {\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n        }\n        return sig.sign(key, options);\n    }\n}\n","import { CompactEncrypt } from '../jwe/compact/encrypt.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class EncryptJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        if (this._protectedHeader) {\n            throw new TypeError('setProtectedHeader can only be called once');\n        }\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    setKeyManagementParameters(parameters) {\n        if (this._keyManagementParameters) {\n            throw new TypeError('setKeyManagementParameters can only be called once');\n        }\n        this._keyManagementParameters = parameters;\n        return this;\n    }\n    setContentEncryptionKey(cek) {\n        if (this._cek) {\n            throw new TypeError('setContentEncryptionKey can only be called once');\n        }\n        this._cek = cek;\n        return this;\n    }\n    setInitializationVector(iv) {\n        if (this._iv) {\n            throw new TypeError('setInitializationVector can only be called once');\n        }\n        this._iv = iv;\n        return this;\n    }\n    replicateIssuerAsHeader() {\n        this._replicateIssuerAsHeader = true;\n        return this;\n    }\n    replicateSubjectAsHeader() {\n        this._replicateSubjectAsHeader = true;\n        return this;\n    }\n    replicateAudienceAsHeader() {\n        this._replicateAudienceAsHeader = true;\n        return this;\n    }\n    async encrypt(key, options) {\n        const enc = new CompactEncrypt(encoder.encode(JSON.stringify(this._payload)));\n        if (this._replicateIssuerAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, iss: this._payload.iss };\n        }\n        if (this._replicateSubjectAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, sub: this._payload.sub };\n        }\n        if (this._replicateAudienceAsHeader) {\n            this._protectedHeader = { ...this._protectedHeader, aud: this._payload.aud };\n        }\n        enc.setProtectedHeader(this._protectedHeader);\n        if (this._iv) {\n            enc.setInitializationVector(this._iv);\n        }\n        if (this._cek) {\n            enc.setContentEncryptionKey(this._cek);\n        }\n        if (this._keyManagementParameters) {\n            enc.setKeyManagementParameters(this._keyManagementParameters);\n        }\n        return enc.encrypt(key, options);\n    }\n}\n","import digest from '../runtime/digest.js';\nimport { encode as base64url } from '../runtime/base64url.js';\nimport { JOSENotSupported, JWKInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nconst check = (value, description) => {\n    if (typeof value !== 'string' || !value) {\n        throw new JWKInvalid(`${description} missing or invalid`);\n    }\n};\nexport async function calculateJwkThumbprint(jwk, digestAlgorithm) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');\n    if (digestAlgorithm !== 'sha256' &&\n        digestAlgorithm !== 'sha384' &&\n        digestAlgorithm !== 'sha512') {\n        throw new TypeError('digestAlgorithm must one of \"sha256\", \"sha384\", or \"sha512\"');\n    }\n    let components;\n    switch (jwk.kty) {\n        case 'EC':\n            check(jwk.crv, '\"crv\" (Curve) Parameter');\n            check(jwk.x, '\"x\" (X Coordinate) Parameter');\n            check(jwk.y, '\"y\" (Y Coordinate) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x, y: jwk.y };\n            break;\n        case 'OKP':\n            check(jwk.crv, '\"crv\" (Subtype of Key Pair) Parameter');\n            check(jwk.x, '\"x\" (Public Key) Parameter');\n            components = { crv: jwk.crv, kty: jwk.kty, x: jwk.x };\n            break;\n        case 'RSA':\n            check(jwk.e, '\"e\" (Exponent) Parameter');\n            check(jwk.n, '\"n\" (Modulus) Parameter');\n            components = { e: jwk.e, kty: jwk.kty, n: jwk.n };\n            break;\n        case 'oct':\n            check(jwk.k, '\"k\" (Key Value) Parameter');\n            components = { k: jwk.k, kty: jwk.kty };\n            break;\n        default:\n            throw new JOSENotSupported('\"kty\" (Key Type) Parameter missing or unsupported');\n    }\n    const data = encoder.encode(JSON.stringify(components));\n    return base64url(await digest(digestAlgorithm, data));\n}\nexport async function calculateJwkThumbprintUri(jwk, digestAlgorithm) {\n    digestAlgorithm !== null && digestAlgorithm !== void 0 ? digestAlgorithm : (digestAlgorithm = 'sha256');\n    const thumbprint = await calculateJwkThumbprint(jwk, digestAlgorithm);\n    return `urn:ietf:params:oauth:jwk-thumbprint:sha-${digestAlgorithm.slice(-3)}:${thumbprint}`;\n}\n","import { importJWK } from '../key/import.js';\nimport isObject from '../lib/is_object.js';\nimport { JWSInvalid } from '../util/errors.js';\nexport async function EmbeddedJWK(protectedHeader, token) {\n    const joseHeader = {\n        ...protectedHeader,\n        ...token === null || token === void 0 ? void 0 : token.header,\n    };\n    if (!isObject(joseHeader.jwk)) {\n        throw new JWSInvalid('\"jwk\" (JSON Web Key) Header Parameter must be a JSON object');\n    }\n    const key = await importJWK({ ...joseHeader.jwk, ext: true }, joseHeader.alg, true);\n    if (key instanceof Uint8Array || key.type !== 'public') {\n        throw new JWSInvalid('\"jwk\" (JSON Web Key) Header Parameter must be a public key');\n    }\n    return key;\n}\n","import { importJWK } from '../key/import.js';\nimport { JWKSInvalid, JOSENotSupported, JWKSNoMatchingKey, JWKSMultipleMatchingKeys, } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nfunction getKtyFromAlg(alg) {\n    switch (typeof alg === 'string' && alg.slice(0, 2)) {\n        case 'RS':\n        case 'PS':\n            return 'RSA';\n        case 'ES':\n            return 'EC';\n        case 'Ed':\n            return 'OKP';\n        default:\n            throw new JOSENotSupported('Unsupported \"alg\" value for a JSON Web Key Set');\n    }\n}\nexport function isJWKSLike(jwks) {\n    return (jwks &&\n        typeof jwks === 'object' &&\n        Array.isArray(jwks.keys) &&\n        jwks.keys.every(isJWKLike));\n}\nfunction isJWKLike(key) {\n    return isObject(key);\n}\nfunction clone(obj) {\n    if (typeof structuredClone === 'function') {\n        return structuredClone(obj);\n    }\n    return JSON.parse(JSON.stringify(obj));\n}\nexport class LocalJWKSet {\n    constructor(jwks) {\n        this._cached = new WeakMap();\n        if (!isJWKSLike(jwks)) {\n            throw new JWKSInvalid('JSON Web Key Set malformed');\n        }\n        this._jwks = clone(jwks);\n    }\n    async getKey(protectedHeader, token) {\n        const { alg, kid } = { ...protectedHeader, ...token === null || token === void 0 ? void 0 : token.header };\n        const kty = getKtyFromAlg(alg);\n        const candidates = this._jwks.keys.filter((jwk) => {\n            let candidate = kty === jwk.kty;\n            if (candidate && typeof kid === 'string') {\n                candidate = kid === jwk.kid;\n            }\n            if (candidate && typeof jwk.alg === 'string') {\n                candidate = alg === jwk.alg;\n            }\n            if (candidate && typeof jwk.use === 'string') {\n                candidate = jwk.use === 'sig';\n            }\n            if (candidate && Array.isArray(jwk.key_ops)) {\n                candidate = jwk.key_ops.includes('verify');\n            }\n            if (candidate && alg === 'EdDSA') {\n                candidate = jwk.crv === 'Ed25519' || jwk.crv === 'Ed448';\n            }\n            if (candidate) {\n                switch (alg) {\n                    case 'ES256':\n                        candidate = jwk.crv === 'P-256';\n                        break;\n                    case 'ES256K':\n                        candidate = jwk.crv === 'secp256k1';\n                        break;\n                    case 'ES384':\n                        candidate = jwk.crv === 'P-384';\n                        break;\n                    case 'ES512':\n                        candidate = jwk.crv === 'P-521';\n                        break;\n                }\n            }\n            return candidate;\n        });\n        const { 0: jwk, length } = candidates;\n        if (length === 0) {\n            throw new JWKSNoMatchingKey();\n        }\n        else if (length !== 1) {\n            const error = new JWKSMultipleMatchingKeys();\n            const { _cached } = this;\n            error[Symbol.asyncIterator] = async function* () {\n                for (const jwk of candidates) {\n                    try {\n                        yield await importWithAlgCache(_cached, jwk, alg);\n                    }\n                    catch (_a) {\n                        continue;\n                    }\n                }\n            };\n            throw error;\n        }\n        return importWithAlgCache(this._cached, jwk, alg);\n    }\n}\nasync function importWithAlgCache(cache, jwk, alg) {\n    const cached = cache.get(jwk) || cache.set(jwk, {}).get(jwk);\n    if (cached[alg] === undefined) {\n        const key = await importJWK({ ...jwk, ext: true }, alg);\n        if (key instanceof Uint8Array || key.type !== 'public') {\n            throw new JWKSInvalid('JSON Web Key Set members must be public keys');\n        }\n        cached[alg] = key;\n    }\n    return cached[alg];\n}\nexport function createLocalJWKSet(jwks) {\n    const set = new LocalJWKSet(jwks);\n    return async function (protectedHeader, token) {\n        return set.getKey(protectedHeader, token);\n    };\n}\n","import { JOSEError, JWKSTimeout } from '../util/errors.js';\nconst fetchJwks = async (url, timeout, options) => {\n    let controller;\n    let id;\n    let timedOut = false;\n    if (typeof AbortController === 'function') {\n        controller = new AbortController();\n        id = setTimeout(() => {\n            timedOut = true;\n            controller.abort();\n        }, timeout);\n    }\n    const response = await fetch(url.href, {\n        signal: controller ? controller.signal : undefined,\n        redirect: 'manual',\n        headers: options.headers,\n    }).catch((err) => {\n        if (timedOut)\n            throw new JWKSTimeout();\n        throw err;\n    });\n    if (id !== undefined)\n        clearTimeout(id);\n    if (response.status !== 200) {\n        throw new JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');\n    }\n    try {\n        return await response.json();\n    }\n    catch (_a) {\n        throw new JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON');\n    }\n};\nexport default fetchJwks;\n","import fetchJwks from '../runtime/fetch_jwks.js';\nimport { JWKSInvalid, JWKSNoMatchingKey } from '../util/errors.js';\nimport { isJWKSLike, LocalJWKSet } from './local.js';\nfunction isCloudflareWorkers() {\n    return (typeof WebSocketPair !== 'undefined' ||\n        (typeof navigator !== 'undefined' && navigator.userAgent === 'Cloudflare-Workers') ||\n        (typeof EdgeRuntime !== 'undefined' && EdgeRuntime === 'vercel'));\n}\nclass RemoteJWKSet extends LocalJWKSet {\n    constructor(url, options) {\n        super({ keys: [] });\n        this._jwks = undefined;\n        if (!(url instanceof URL)) {\n            throw new TypeError('url must be an instance of URL');\n        }\n        this._url = new URL(url.href);\n        this._options = { agent: options === null || options === void 0 ? void 0 : options.agent, headers: options === null || options === void 0 ? void 0 : options.headers };\n        this._timeoutDuration =\n            typeof (options === null || options === void 0 ? void 0 : options.timeoutDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.timeoutDuration : 5000;\n        this._cooldownDuration =\n            typeof (options === null || options === void 0 ? void 0 : options.cooldownDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.cooldownDuration : 30000;\n        this._cacheMaxAge = typeof (options === null || options === void 0 ? void 0 : options.cacheMaxAge) === 'number' ? options === null || options === void 0 ? void 0 : options.cacheMaxAge : 600000;\n    }\n    coolingDown() {\n        return typeof this._jwksTimestamp === 'number'\n            ? Date.now() < this._jwksTimestamp + this._cooldownDuration\n            : false;\n    }\n    fresh() {\n        return typeof this._jwksTimestamp === 'number'\n            ? Date.now() < this._jwksTimestamp + this._cacheMaxAge\n            : false;\n    }\n    async getKey(protectedHeader, token) {\n        if (!this._jwks || !this.fresh()) {\n            await this.reload();\n        }\n        try {\n            return await super.getKey(protectedHeader, token);\n        }\n        catch (err) {\n            if (err instanceof JWKSNoMatchingKey) {\n                if (this.coolingDown() === false) {\n                    await this.reload();\n                    return super.getKey(protectedHeader, token);\n                }\n            }\n            throw err;\n        }\n    }\n    async reload() {\n        if (this._pendingFetch && isCloudflareWorkers()) {\n            this._pendingFetch = undefined;\n        }\n        this._pendingFetch || (this._pendingFetch = fetchJwks(this._url, this._timeoutDuration, this._options)\n            .then((json) => {\n            if (!isJWKSLike(json)) {\n                throw new JWKSInvalid('JSON Web Key Set malformed');\n            }\n            this._jwks = { keys: json.keys };\n            this._jwksTimestamp = Date.now();\n            this._pendingFetch = undefined;\n        })\n            .catch((err) => {\n            this._pendingFetch = undefined;\n            throw err;\n        }));\n        await this._pendingFetch;\n    }\n}\nexport function createRemoteJWKSet(url, options) {\n    const set = new RemoteJWKSet(url, options);\n    return async function (protectedHeader, token) {\n        return set.getKey(protectedHeader, token);\n    };\n}\n","import * as base64url from '../runtime/base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport jwtPayload from '../lib/jwt_claims_set.js';\nimport { ProduceJWT } from './produce.js';\nexport class UnsecuredJWT extends ProduceJWT {\n    encode() {\n        const header = base64url.encode(JSON.stringify({ alg: 'none' }));\n        const payload = base64url.encode(JSON.stringify(this._payload));\n        return `${header}.${payload}.`;\n    }\n    static decode(jwt, options) {\n        if (typeof jwt !== 'string') {\n            throw new JWTInvalid('Unsecured JWT must be a string');\n        }\n        const { 0: encodedHeader, 1: encodedPayload, 2: signature, length } = jwt.split('.');\n        if (length !== 3 || signature !== '') {\n            throw new JWTInvalid('Invalid Unsecured JWT');\n        }\n        let header;\n        try {\n            header = JSON.parse(decoder.decode(base64url.decode(encodedHeader)));\n            if (header.alg !== 'none')\n                throw new Error();\n        }\n        catch (_a) {\n            throw new JWTInvalid('Invalid Unsecured JWT');\n        }\n        const payload = jwtPayload(header, base64url.decode(encodedPayload), options);\n        return { payload, header };\n    }\n}\n","import * as base64url from '../runtime/base64url.js';\nexport const encode = base64url.encode;\nexport const decode = base64url.decode;\n","import { decode as base64url } from './base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nexport function decodeProtectedHeader(token) {\n    let protectedB64u;\n    if (typeof token === 'string') {\n        const parts = token.split('.');\n        if (parts.length === 3 || parts.length === 5) {\n            ;\n            [protectedB64u] = parts;\n        }\n    }\n    else if (typeof token === 'object' && token) {\n        if ('protected' in token) {\n            protectedB64u = token.protected;\n        }\n        else {\n            throw new TypeError('Token does not contain a Protected Header');\n        }\n    }\n    try {\n        if (typeof protectedB64u !== 'string' || !protectedB64u) {\n            throw new Error();\n        }\n        const result = JSON.parse(decoder.decode(base64url(protectedB64u)));\n        if (!isObject(result)) {\n            throw new Error();\n        }\n        return result;\n    }\n    catch (_a) {\n        throw new TypeError('Invalid Token or Protected Header formatting');\n    }\n}\n","import { decode as base64url } from './base64url.js';\nimport { decoder } from '../lib/buffer_utils.js';\nimport isObject from '../lib/is_object.js';\nimport { JWTInvalid } from './errors.js';\nexport function decodeJwt(jwt) {\n    if (typeof jwt !== 'string')\n        throw new JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');\n    const { 1: payload, length } = jwt.split('.');\n    if (length === 5)\n        throw new JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');\n    if (length !== 3)\n        throw new JWTInvalid('Invalid JWT');\n    if (!payload)\n        throw new JWTInvalid('JWTs must contain a payload');\n    let decoded;\n    try {\n        decoded = base64url(payload);\n    }\n    catch (_a) {\n        throw new JWTInvalid('Failed to base64url decode the payload');\n    }\n    let result;\n    try {\n        result = JSON.parse(decoder.decode(decoded));\n    }\n    catch (_b) {\n        throw new JWTInvalid('Failed to parse the decoded payload as JSON');\n    }\n    if (!isObject(result))\n        throw new JWTInvalid('Invalid JWT Claims Set');\n    return result;\n}\n","import crypto from './webcrypto.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport random from './random.js';\nexport async function generateSecret(alg, options) {\n    var _a;\n    let length;\n    let algorithm;\n    let keyUsages;\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512':\n            length = parseInt(alg.slice(-3), 10);\n            algorithm = { name: 'HMAC', hash: `SHA-${length}`, length };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            length = parseInt(alg.slice(-3), 10);\n            return random(new Uint8Array(length >> 3));\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW':\n            length = parseInt(alg.slice(1, 4), 10);\n            algorithm = { name: 'AES-KW', length };\n            keyUsages = ['wrapKey', 'unwrapKey'];\n            break;\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW':\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            length = parseInt(alg.slice(1, 4), 10);\n            algorithm = { name: 'AES-GCM', length };\n            keyUsages = ['encrypt', 'decrypt'];\n            break;\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n    }\n    return crypto.subtle.generateKey(algorithm, (_a = options === null || options === void 0 ? void 0 : options.extractable) !== null && _a !== void 0 ? _a : false, keyUsages);\n}\nfunction getModulusLengthOption(options) {\n    var _a;\n    const modulusLength = (_a = options === null || options === void 0 ? void 0 : options.modulusLength) !== null && _a !== void 0 ? _a : 2048;\n    if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n        throw new JOSENotSupported('Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used');\n    }\n    return modulusLength;\n}\nexport async function generateKeyPair(alg, options) {\n    var _a, _b, _c;\n    let algorithm;\n    let keyUsages;\n    switch (alg) {\n        case 'PS256':\n        case 'PS384':\n        case 'PS512':\n            algorithm = {\n                name: 'RSA-PSS',\n                hash: `SHA-${alg.slice(-3)}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'RS256':\n        case 'RS384':\n        case 'RS512':\n            algorithm = {\n                name: 'RSASSA-PKCS1-v1_5',\n                hash: `SHA-${alg.slice(-3)}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            algorithm = {\n                name: 'RSA-OAEP',\n                hash: `SHA-${parseInt(alg.slice(-3), 10) || 1}`,\n                publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n                modulusLength: getModulusLengthOption(options),\n            };\n            keyUsages = ['decrypt', 'unwrapKey', 'encrypt', 'wrapKey'];\n            break;\n        case 'ES256':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'ES384':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'ES512':\n            algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n            keyUsages = ['sign', 'verify'];\n            break;\n        case 'EdDSA':\n            keyUsages = ['sign', 'verify'];\n            const crv = (_a = options === null || options === void 0 ? void 0 : options.crv) !== null && _a !== void 0 ? _a : 'Ed25519';\n            switch (crv) {\n                case 'Ed25519':\n                case 'Ed448':\n                    algorithm = { name: crv };\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported crv option provided');\n            }\n            break;\n        case 'ECDH-ES':\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            keyUsages = ['deriveKey', 'deriveBits'];\n            const crv = (_b = options === null || options === void 0 ? void 0 : options.crv) !== null && _b !== void 0 ? _b : 'P-256';\n            switch (crv) {\n                case 'P-256':\n                case 'P-384':\n                case 'P-521': {\n                    algorithm = { name: 'ECDH', namedCurve: crv };\n                    break;\n                }\n                case 'X25519':\n                case 'X448':\n                    algorithm = { name: crv };\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n    }\n    return (crypto.subtle.generateKey(algorithm, (_c = options === null || options === void 0 ? void 0 : options.extractable) !== null && _c !== void 0 ? _c : false, keyUsages));\n}\n","import { generateKeyPair as generate } from '../runtime/generate.js';\nexport async function generateKeyPair(alg, options) {\n    return generate(alg, options);\n}\n","import { generateSecret as generate } from '../runtime/generate.js';\nexport async function generateSecret(alg, options) {\n    return generate(alg, options);\n}\n"],"names":["MobileOutlined","props","ref","AntdIcon","MAX_INT32","buffers","size","acc","length","buf","i","buffer","p2s","alg","p2sInput","writeUInt32BE","value","offset","high","low","input","secret","bits","iterations","res","iter","unencoded","CHUNK_SIZE","arr","encode","encoded","binary","bytes","decode","message","_a","claim","reason","key","enc","iv","cek","expected","actual","cbcDecrypt","ciphertext","tag","aad","keySize","encKey","macKey","macData","expectedTag","macCheckPassed","plaintext","gcmDecrypt","checkKeySize","getCryptoKey","usage","cryptoKey","cryptoKeyCek","encryptedKey","deriveKey","publicKey","privateKey","algorithm","keyLength","apu","apv","sharedSecret","generateEpk","ecdhAllowed","p2c","salt","keylen","subtleAlg","wrapAlg","derived","subtleRsaEs","genericExport","keyType","keyFormat","toSPKI","toPKCS8","findOid","keyData","oid","from","sub","index","getNamedCurve","genericImport","replace","pem","options","keyUsages","c","isPublic","namedCurve","getElement","seq","result","next","nextPart","parseElement","position","byteLength","numberOfDigits","spkiFromX509","tbsCertificate","getSPKI","x509","raw","spki","cause","subtleMapping","jwk","parse","_b","rest","importSPKI","importX509","importPKCS8","pkcs8","octAsKeyObject","cbcEncrypt","gcmEncrypt","encrypted","jweAlgorithm","joseHeader","epk","partyUInfo","partyVInfo","p2cLimit","Err","recognizedDefault","recognizedOption","protectedHeader","recognized","parameter","jwe","parsedProt","keyManagementAlgorithms","contentEncryptionAlgorithms","resolvedKey","err","additionalData","decrypted","generalDecrypt","recipient","ext","key_ops","use","exportSPKI","exportPKCS8","providedCek","providedParameters","parameters","ephemeralKey","x","y","crv","kty","kwAlg","sharedUnprotectedHeader","unprotectedHeader","aadMember","deflated","IndividualRecipient","args","GeneralEncrypt","_c","flattened","target","subtleDsa","hash","signature","data","jws","extensions","b64","algorithms","payload","verified","generalVerify","minute","hour","day","week","year","REGEX","str","matched","normalizeTyp","checkAudiencePresence","audPayload","audOption","encodedPayload","typ","requiredClaims","issuer","subject","audience","maxTokenAge","tolerance","currentDate","now","age","max","jwtVerify","jwt","jwtDecrypt","modulusLength","unusable","name","prop","isAlgorithm","getHashLength","checkUsage","usages","msg","last","checkSigCryptoKey","types","withAlg","headers","sources","header","symmetricTypeCheck","asymmetricTypeCheck","CompactSign","IndividualSignature","sig","GeneralSign","date","isObjectLike","proto","jwtId","SignJWT","EncryptJWT","check","description","calculateJwkThumbprint","digestAlgorithm","components","calculateJwkThumbprintUri","thumbprint","EmbeddedJWK","token","getKtyFromAlg","jwks","isJWKLike","clone","obj","kid","candidates","candidate","error","_cached","importWithAlgCache","cache","cached","createLocalJWKSet","set","url","timeout","controller","id","timedOut","response","isCloudflareWorkers","RemoteJWKSet","json","createRemoteJWKSet","UnsecuredJWT","encodedHeader","decodeProtectedHeader","protectedB64u","parts","decodeJwt","decoded","generateSecret","getModulusLengthOption","generateKeyPair"],"sourceRoot":""}